{"version":3,"sources":["config/msal-config.js","contexts/AuthContext.jsx","Auth/Phase.js","contexts/PhaseContext.jsx","Auth/Can.js","Auth/ability.js","msalHelpers.js","utils/api.axios.js","utils/graph.axios.js","contexts/CreateProposalContext.js","components/Auth/ErrorComponent.jsx","components/Auth/Loading.jsx","components/AppLoading.jsx","utils/topic.js","components/PrimaryButton.jsx","utils/yupSchemas/yupTopicSchema.js","components/Input.jsx","components/MultiLineInput.jsx","components/Tags.jsx","components/TargetCoursesInput.jsx","components/TopicManagement/TopicModal.jsx","components/TopicManagement/index.jsx","components/TopicList.jsx","components/AddTopicForm.jsx","components/CountdownToDate.jsx","components/Welcome.jsx","components/UserManagement/Assignment/UploadButton.jsx","components/CSVUploader.jsx","components/UserManagement/Assignment/UserEmailInputField.jsx","components/PaginatedTable.jsx","components/Buttons/BackButton.jsx","components/CollapsableAlert.jsx","components/UserManagement/Assignment/StudentAssignment.jsx","components/Table/TablePaginationActions.jsx","components/UserManagement/StudentManagement.jsx","components/UserManagement/Assignment/SupervisorAssignment.jsx","components/UserManagement/SupervisorManagement.jsx","utils/yupSchemas/ManageCoordinator.js","components/UserManagement/Coordinator/ListCoordinatorTable.jsx","components/UserManagement/Coordinator/CoordinatorManagement.jsx","components/NavBar.jsx","components/Header.jsx","utils/proposal.js","utils/yupSchemas/yupProposalSchema.js","components/Proposals/ProposalModal.jsx","components/Proposals/ManageProposal.jsx","components/ViewTopic.jsx","components/Proposals/Breadcrumb.jsx","components/Proposals/CreateProposal.jsx","components/Proposals/CreateProposalStep2.jsx","components/Proposals/CreateProposalFinish.jsx","components/NoRole.jsx","components/NotFound.jsx","components/TopicManagement/TopicProposals.jsx","Auth/Proposal.js","components/Proposals/ViewProposal.jsx","components/Settings/index.jsx","components/PhaseManagement.jsx","components/Help/HelpPage.jsx","App.js","styles/theme.js","index.js"],"names":["config","auth","clientId","process","tenantId","applicationResourceId","scopes","graph","customApi","endpoints","login","appRoles","displayName","priority","msalConfig","redirectUri","REACT_APP_DEV_REDIRECT_URL","postLogoutRedirectUri","REACT_APP_DEV_POST_LOGOUT_URL","loginRequest","authority","AuthContext","createContext","AuthContextProvider","props","useState","user","setUser","Provider","value","setUserObject","userObject","children","Phase","attrs","Object","assign","this","PhaseContext","PhaseContextProvider","phase","setPhase","currentPhase","setCurrentPhase","AbilityContext","Can","createContextualCan","Consumer","defineAbilityFor","AbilityBuilder","Ability","can","cannot","build","role","student","id","supervisor","getAccessToken","instance","request","a","acquireTokenSilent","catch","err","console","log","name","acquireTokenPopup","error","tokenResponse","accessToken","silentTokenResponse","account","isSetup","service","axios","create","baseURL","timeout","interceptors","use","req","headers","Authorization","CreateProposalContext","CreateProposalContextProvider","step","isCustomProposal","topic","contextData","setCntxData","setContextData","values","prevData","useData","useContext","ErrorComponent","Typography","variant","errorCode","Loading","AppLoading","topicStatuses","draft","suggestion","active","archived","assigned","prev_term","topicStatusToHumanFriendlyString","status","useStyles","makeStyles","theme","root","margin","spacing","PrimaryButton","styles","Button","type","fullWidth","color","className","defaultValues","title","description","additionalNotes","tags","targetCourses","basicSchemaObj","yup","required","min","formSchema","shape","editFormSchema","oneOf","Input","forwardRef","ref","TextField","inputRef","inputProps","readOnly","MultiLineInput","multiline","rows","rowsMax","SHOW_PARENT","TreeSelect","Tags","treeData","setTreeData","loading","setLoading","useEffect","api","get","then","res","data","finally","tProps","onChange","treeCheckable","showCheckedStrategy","placeholder","bordered","showSearch","size","varaint","style","marginLeft","border","borderRadius","width","pointerEvents","disabled","FormHelperText","helperText","courses","TargetCoursesInput","control","label","render","Autocomplete","multiple","options","getOptionLabel","option","defaultValue","filterSelectedOptions","renderInput","params","_","formControl","minWidth","flex","selectEmpty","marginTop","readOnlySelect","buttonProgress","green","position","left","dialogCloseButton","top","right","palette","grey","fontSize","dialogEditButton","marginBottom","TopicModal","classes","editMode","setEditMode","savingChanges","setSavingChanges","useForm","resolver","yupResolver","reValidateMode","register","handleSubmit","errors","toggleEditMode","Dialog","maxWidth","open","dialogOpen","onClose","aria-labelledby","zIndex","disableBackdropClick","IconButton","onClick","confirm","setDialogOpen","Cancel","DialogTitle","endIcon","Edit","Divider","DialogContent","onSubmit","differences","result","key","keys","length","compareDiffs","post","_id","refresh","display","flexDirection","alignItems","marginRight","message","FormControl","Select","MenuItem","vals","DialogActions","CircularProgress","defaultProps","SubmissionDialog","DialogContentText","FormControlLabel","Checkbox","checked","e","setChecked","target","setOpen","proceed","TopicManagement","topics","setTopics","customTopic","setCustomTopic","selectedTopic","setSelectedTopic","submissionDialogOpen","setSubmissionDialogOpen","proceedSubmissionChecked","setProceedSubmissionChecked","submittingTopics","setSubmittingTopics","submitAllowed","setSubmitAllowed","history","useHistory","refreshTopicList","retrievedTopics","hasSuggestionReady","forEach","push","filter","openTopicDetailsDialog","Container","I","Switch","body","TableContainer","component","Paper","Table","TableHead","TableRow","TableCell","align","TableBody","scope","colSpan","map","to","flexGrow","hasSuggestion","alert","topicType","TopicList","supervisors","setSupervisors","query","selected","code","abbr","alignContent","justifyContent","slice","tag","Box","backgroundColor","padding","proposalCount","AddTopicForm","resp","autoComplete","countdown","paddingBottom","textAlign","countdownCol","countdownColElement","Countdown","days","hours","sec","timeLeft","setTimeLeft","interval","updateInterval","setInterval","date","calculateCountdown","stop","endDate","diff","Date","parse","years","Math","floor","clearInterval","addLeadingZeros","String","phaseActions","1","2","3","4","Welcome","fontWeight","CountdownToDate","toString","action","UploadButton","onUpload","buttonRef","React","createRef","papaParseConfig","header","CSVUploader","handleOpenDialog","current","handleRemoveFile","removeFile","onFileLoad","studentsArray","email","StudentEmail","onAdd","onError","file","inputElem","reason","noClick","noDrag","noProgressBar","onRemoveFile","height","paddingLeft","paddingRight","borderWidth","borderStyle","borderColor","lineHeight","paddingTop","input","iconButton","divider","UserEmailInputField","InputBase","endAdornment","Tooltip","aria-label","edge","disableRipple","includeEmailPrefix","onChangeEmailPrefix","orientation","AddCircle","flexShrink","not_found","exists","no_assignment","TablePaginationActions","count","page","rowsPerPage","onChangePage","event","ceil","userTooltipTitles","PaginatedTable","visable","setVisable","setPage","setRowsPerPage","removableEntries","colspan","startIcon","removeEntry","TableFooter","TablePagination","rowsPerPageOptions","SelectProps","native","newPage","onChangeRowsPerPage","parseInt","ActionsComponent","button","BackButton","dense","goBack","CollapsableAlert","Collapse","in","Alert","severity","StudentAssignment","currentEmail","setCurrentEmail","students","setStudents","setIncludeEmailPrefix","setAlert","alertOpen","setAlertOpen","studentsMap","emailsMap","index","indexOf","remainingStudents","undefined","includes","bulkStudents","studentsList","prefix","trim","test","studentEmail","filteredStudents","s","StudentManagement","visableStudents","setVisableStudents","setSelected","refreshStudentList","maxwidth","searched","studentId","studentList","splice","handleSelected","SupervisorAssignment","supervisorsMap","remainingsupervisors","bulksupervisors","supervisorsList","filteredSupervisors","SupervisorManagement","visableSupervisors","setVisableSupervisors","refreshSupervisorList","supervisorId","supervisorList","coordinator","ListCoordinatorTable","refreshing","handleRemove","Transition","Slide","direction","ManageCoordinator","selectedCoordinator","setSelectedCoordinator","assignedCoordinators","setAssignedCoordinators","setRefreshing","tableAlert","setTableAlert","tableAlertOpen","setTableAlertOpen","refreshAssignedCoordinators","coordinators","deleteCoordinator","coordinatorId","TransitionComponent","aria-describedby","ArrowForward","navDisplayFlex","linkText","textDecoration","textTransform","linkButton","NavBar","useMsal","anchorEl","setAnchorEl","Toolbar","currentTarget","Avatar","Menu","keepMounted","Boolean","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","logout","onRedirectNavigate","ListItemIcon","ListItemText","primary","appBar","drawer","Header","AppBar","proposalStatuses","submitted","under_review","pending_edits","accepted","rejected","proposalStatusToHumanFriendlyString","chooseMeMessage","environment","languages","ProposalModal","proposal","chooseMessage","supervisorMessage","NextActionButton","updateStatus","proposalId","downgradeStatus","ProposalsTable","setSelectedProposal","ManageProposal","supervisorProposals","setSupervisorProposals","customProposals","setCustomProposals","selectedProposal","refreshProposalList","proposals","custom","val","class1","ViewTopic","useParams","setTopic","invalidCode","setInvalidCode","hasProposal","Breadcrumb","CreateProposal","validTopic","setValidTopic","topicCode","revalidate","formData","handleNextStep","submitProposal","saveAsDraft","response","JSON","stringify","NoRole","accountType","NotFound","TopicProposals","setProposals","topicId","Proposal","responseType","when","is","ViewProposal","setProposal","submittingResponse","setSubmittingResponse","refreshProposal","elevation","Grid","container","item","xs","grid","gridItem","gridItemLabel","gridItemContent","superviseStudentTopics","Test","updating","setUpdating","setSupervisor","reset","PhaseManagement","phases","setPhases","phasesData","p","moment","start_date","temp","updatePhase","format","showTime","renderExtraFooter","i","isAfter","hidden","heading","paragraph","HelpPage","Pages","ability","generateAbilitiesFor","allowForPhase","Array","isArray","exact","path","CreateProposalStep2","CreateProposalFinish","App","appReady","setAppReady","accounts","inProgress","useAccount","authRequest","inst","acc","graphSetup","axiosGraphInstance","rolePriority","roleData","roleObject","appRoleId","phaseDoc","startDate","end_date","now","localAccountId","interactionType","InteractionType","Redirect","authenticationRequest","errorComponent","loadingComponent","createMuiTheme","main","secondary","red","A400","background","default","msalInstance","PublicClientApplication","AppProvider","ThemeProvider","StrictMode","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.68de5e42.chunk.js","sourcesContent":["const config = {\r\n  auth: {\r\n    clientId: process.env.REACT_APP_AZURE_CLIENT_ID,\r\n    tenantId: process.env.REACT_APP_AZURE_TENANT_ID,\r\n    applicationResourceId: process.env.REACT_APP_AZURE_APPLICATION_RESOURCE_ID,\r\n    scopes: {\r\n      graph: ['user.read', 'offline_access'],\r\n      customApi: [process.env.REACT_APP_AZURE_CUSTOM_API_SCOPE]\r\n    }\r\n  },\r\n  endpoints: {\r\n    graph: process.env.REACT_APP_MS_GRAPH_ENDPOINT,\r\n    login: process.env.REACT_APP_MS_LOGIN_ENDPOINT,\r\n    customApi: process.env.REACT_APP_API_URL\r\n  },\r\n  appRoles: {\r\n    '170a8e98-463f-4f72-b783-963f05923afc': {\r\n      displayName: 'Student',\r\n      priority: 1\r\n    },\r\n    'de311fc8-6e4b-4ee3-8e55-c5e82319a94f': {\r\n      displayName: 'Supervisor',\r\n      priority: 2\r\n    },\r\n    'fb3c340f-81e7-4c73-bca8-637e0efc1fc2': {\r\n      displayName: 'Coordinator',\r\n      priority: 3\r\n    },\r\n    '141cfda0-c415-4aba-a6af-20bfc1a639f7': {\r\n      displayName: 'Administrator',\r\n      priority: 4\r\n    }\r\n  }\r\n}\r\n\r\nconst msalConfig = {\r\n  auth: {\r\n    clientId: config.auth.clientId,\r\n    redirectUri:\r\n      process.env.REACT_APP_STAGE === 'dev'\r\n        ? process.env.REACT_APP_DEV_REDIRECT_URL\r\n        : process.env.REACT_APP_PROD_REDIRECT_URL,\r\n    postLogoutRedirectUri:\r\n      process.env.REACT_APP_STAGE === 'dev'\r\n        ? process.env.REACT_APP_DEV_POST_LOGOUT_URL\r\n        : process.env.REACT_APP_PROD_POST_LOGOUT_URL\r\n  }\r\n}\r\n\r\nconst loginRequest = {\r\n  authority: `${config.endpoints.login}/${config.auth.tenantId}`,\r\n  scopes: ['user.read', 'offline_access']\r\n}\r\n\r\nexport { msalConfig, loginRequest, config }\r\n","import React, { createContext, useState } from 'react'\nimport PropTypes from 'prop-types'\n\nexport const AuthContext = createContext()\n\nconst AuthContextProvider = props => {\n  const [user, setUser] = useState(null)\n\n  const setUserObject = userObject => {\n    setUser(userObject)\n  }\n\n  return (\n    <AuthContext.Provider value={{ user: user, setUserObject: setUserObject }}>\n      {props.children}\n    </AuthContext.Provider>\n  )\n}\n\nAuthContextProvider.propTypes = {\n  children: PropTypes.node.isRequired\n}\n\nexport default AuthContextProvider\n","class Phase {\n  constructor(attrs) {\n    Object.assign(this, attrs)\n  }\n}\n\nexport default Phase\n","import React, { createContext, useState } from 'react'\nimport PropTypes from 'prop-types'\nimport Phase from '../Auth/Phase'\n\nexport const PhaseContext = createContext()\n\nconst PhaseContextProvider = props => {\n  const [phase, setPhase] = useState(null)\n\n  const setCurrentPhase = currentPhase => {\n    setPhase(currentPhase)\n  }\n\n  return (\n    <PhaseContext.Provider\n      value={{ currentPhase: new Phase({ ...phase }), setCurrentPhase }}>\n      {props.children}\n    </PhaseContext.Provider>\n  )\n}\n\nPhaseContextProvider.propTypes = {\n  children: PropTypes.node.isRequired\n}\n\nexport default PhaseContextProvider\n","import { createContext } from 'react'\nimport { createContextualCan } from '@casl/react'\n\nexport const AbilityContext = createContext()\nexport const Can = createContextualCan(AbilityContext.Consumer)\n","import { AbilityBuilder, Ability } from '@casl/ability'\n\nexport default function defineAbilityFor(user) {\n  const { can, cannot, build } = new AbilityBuilder(Ability)\n\n  // Setup to allow specific actions to be taken during each phase\n  can('takeActionPhaseOne', 'Phase', { phase: 1 })\n  can('takeActionPhaseTwo', 'Phase', { phase: 2 })\n  can('takeActionPhaseThree', 'Phase', { phase: 3 })\n  can('takeActionPhaseFour', 'Phase', { phase: 4 })\n\n  switch (user.role) {\n    case 'Student':\n      can('read', 'Topic')\n      can('create', 'Proposal')\n      can('read', 'Proposal', { student: user.id })\n      can('manage', 'Proposal', { student: user.id })\n      break\n    case 'Supervisor':\n      can('read', 'Topic')\n      can('create', 'Topic')\n      can('manage', 'Topic', { supervisor: user.id })\n      can('read', 'Proposal')\n      can('respond', 'Proposal', { 'topic.supervisor': user.id })\n      break\n    // eslint-disable-next-line\n    case 'Coordinator':\n      can('manage', 'Student')\n      can('manage', 'Supervisor')\n      can('read', 'Topic')\n      can('create', 'Topic')\n      can('manage', 'Topic', { supervisor: user.id })\n      break\n    case 'Administrator':\n      can('manage', 'Coordinator')\n      can('update', 'Phase')\n      break\n    default:\n      cannot('*', '*')\n  }\n\n  return build()\n}\n","import axios from 'axios'\nimport { config } from './config/msal-config'\n\nexport const getProfileData = (instance, account) => {\n  const request = {\n    authority: `${config.endpoints.login}/${config.auth.tenantId}`,\n    scopes: config.auth.scopes,\n    account: account\n  }\n\n  getTokenSilent(instance, request)\n    .then(resp => {\n      console.log(resp.accessToken)\n      const bearer = `Bearer ${resp.accessToken}`\n\n      const options = {\n        headers: {\n          Authorization: bearer\n        }\n      }\n      axios\n        .get(`${config.endpoints.graph}/me`, options)\n        .then(res => {\n          console.log(res)\n        })\n        .catch(err => console.error(err))\n    })\n    .catch(err => console.log(err))\n}\n\nexport const getTokenSilent = (instance, request) => {\n  return instance.acquireTokenSilent(request).catch(error => {\n    console.warn('silent token acquisition fails. acquiring token using popup')\n    console.log(error)\n    if (error.name === 'InteractionRequiredAuthError') {\n      // fallback to interaction when silent call fails\n      return instance\n        .acquireTokenPopup(request)\n        .then(tokenResponse => {\n          console.log(tokenResponse)\n          return tokenResponse\n        })\n        .catch(error => {\n          console.error(error)\n        })\n    } else {\n      console.warn(error)\n    }\n  })\n}\n\nexport const getAccessToken = async (instance, request) => {\n  const silentTokenResponse = await instance\n    .acquireTokenSilent(request)\n    .catch(async err => {\n      console.log('Interaction Required for access token')\n      if (err.name === 'InteractionRequiredAuthError') {\n        const tokenResponse = await instance\n          .acquireTokenPopup(request)\n          .catch(error => {\n            console.error(error)\n          })\n        return tokenResponse.accessToken\n      }\n\n      console.log('Error getting access token: ', err)\n    })\n\n  if (silentTokenResponse && silentTokenResponse.accessToken) {\n    return silentTokenResponse.accessToken\n  } else {\n    console.log('Silent Error: ', silentTokenResponse)\n  }\n}\n\nexport const getUserProfileByEmail = (instance, account, email) => {\n  const request = {\n    authority: `${config.endpoints.login}/${config.auth.tenantId}`,\n    scopes: config.auth.scopes.concat('User.Read.All'),\n    account: account\n  }\n\n  getTokenSilent(instance, request)\n    .then(res => {\n      const bearer = `Bearer ${res.accessToken}`\n\n      const options = {\n        headers: {\n          Authorization: bearer\n        }\n      }\n\n      axios\n        .get(`${config.endpoints.graph}/users/${email}`, options)\n        .then(response => {\n          console.log(response.data.id)\n        })\n        .catch(err => {\n          console.log(err)\n        })\n    })\n    .catch(err => {\n      console.log(err)\n    })\n}\n\nexport const assignRoleToUser = (instance, account, subjectUserId, roleId) => {\n  const request = {\n    authority: `${config.endpoints.login}/${config.auth.tenantId}`,\n    scopes: config.auth.scopes.concat([\n      'Directory.AccessAsUser.All',\n      'Directory.ReadWrite.All',\n      'Directory.Read.All'\n    ]),\n    account: account\n  }\n\n  getTokenSilent(instance, request)\n    .then(res => {\n      const bearer = `Bearer ${res.accessToken}`\n\n      const options = {\n        headers: {\n          Authorization: bearer\n        }\n      }\n\n      const url = `${config.endpoints.graph}/users/${subjectUserId}/appRoleAssignments`\n      const body = {\n        principalId: subjectUserId,\n        principalType: 'User',\n        resourceId: config.auth.applicationResourceId,\n        appRoleId: roleId\n      }\n\n      axios\n        .post(url, body, options)\n        .then(response => {\n          console.log(response)\n        })\n        .catch(err => {\n          console.log(err)\n        })\n    })\n    .catch(err => {\n      console.log(err)\n    })\n}\n\nexport const getToken = (instance, account) => {\n  console.log(config)\n  const request = {\n    authority: `${config.endpoints.login}/${config.auth.tenantId}`,\n    scopes: config.auth.scopes,\n    account: account\n  }\n\n  getTokenSilent(instance, request)\n    .then(res => {\n      console.log(res.accessToken)\n    })\n    .catch(err => {\n      console.log(err)\n    })\n}\n","import axios from 'axios'\nimport { config } from '../config/msal-config'\n\nimport { getAccessToken } from '../msalHelpers'\n\nlet instance = null\nlet account = null\nlet isSetup = false\n\nconst service = axios.create({\n  baseURL: config.endpoints.customApi,\n  timeout: 4000\n})\n\nservice.interceptors.request.use(async req => {\n  console.log('Sending request')\n\n  console.log(req)\n\n  let request = {\n    authority: `${config.endpoints.login}/${config.auth.tenantId}`,\n    scopes: config.auth.scopes.customApi,\n    account: account\n  }\n\n  const accessToken = await getAccessToken(instance, request)\n  if (accessToken) {\n    req.headers = {\n      Authorization: `Bearer ${accessToken}`\n    }\n  } else {\n    delete req.headers.Authorization\n  }\n\n  return req\n})\n\nexport const setup = (inst, acc) => {\n  if (isSetup) {\n    return\n  }\n  instance = inst\n  account = acc\n  isSetup = true\n}\n\nexport const printDetails = () => {\n  console.log(instance, account)\n}\n\nexport default service\n","import axios from 'axios'\nimport { config } from '../config/msal-config'\n\nimport { getAccessToken } from '../msalHelpers'\n\nlet instance = null\nlet account = null\nlet isSetup = false\n\nconst service = axios.create({\n  baseURL: config.endpoints.graph,\n  timeout: 4000\n})\n\nservice.interceptors.request.use(async req => {\n  console.log('Sending request to Graph')\n\n  let request = {\n    authority: `${config.endpoints.login}/${config.auth.tenantId}`,\n    scopes: config.auth.scopes.graph,\n    account: account\n  }\n\n  const accessToken = await getAccessToken(instance, request)\n  if (accessToken) {\n    req.headers = {\n      Authorization: `Bearer ${accessToken}`\n    }\n  } else {\n    delete req.headers.Authorization\n  }\n\n  return req\n})\n\nexport const setup = (inst, acc) => {\n  if (isSetup) {\n    return\n  }\n  instance = inst\n  account = acc\n  isSetup = true\n}\n\nexport const printDetails = () => {\n  console.log(instance, account)\n}\n\nexport default service\n","/* eslint-disable react/prop-types */\nimport React, { createContext, useState, useContext } from 'react'\n\nconst CreateProposalContext = createContext()\n\nexport const CreateProposalContextProvider = ({ children }) => {\n  const [contextData, setCntxData] = useState({\n    step: 0,\n    isCustomProposal: false,\n    topic: null\n  })\n\n  const setContextData = values => {\n    setCntxData(prevData => ({\n      ...prevData,\n      ...values\n    }))\n  }\n\n  return (\n    <CreateProposalContext.Provider value={{ contextData, setContextData }}>\n      {children}\n    </CreateProposalContext.Provider>\n  )\n}\n\nexport const useData = () => useContext(CreateProposalContext)\n","import React, { Typography } from '@material-ui/core'\nimport PropTypes from 'prop-types'\n\nexport default function ErrorComponent({ error }) {\n  console.log(error)\n  return (\n    <Typography variant=\"h6\">An Error Occurred: {error.errorCode}</Typography>\n  )\n}\n\nErrorComponent.propTypes = {\n  error: PropTypes.string.isRequired\n}\n","import React from 'react'\nimport Typography from '@material-ui/core/Typography'\n\nexport default function Loading() {\n  return <Typography variant=\"h6\">Authentication in progress...</Typography>\n}\n","import React from 'react'\nimport Typography from '@material-ui/core/Typography'\n\nexport default function AppLoading() {\n  return <Typography variant=\"h6\">Getting things ready...</Typography>\n}\n","const topicStatuses = {\n  draft: 'Draft',\n  suggestion: 'Ready for Submission',\n  active: 'Active',\n  archived: 'Archived',\n  assigned: 'Assigned',\n  prev_term: 'From Previous Term'\n}\nconst topicStatusToHumanFriendlyString = status => topicStatuses[status]\n\nexport { topicStatusToHumanFriendlyString }\n","import React from 'react'\nimport Button from '@material-ui/core/Button'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}))\n\nconst PrimaryButton = ({ children, ...props }) => {\n  const styles = useStyles()\n\n  return (\n    <Button\n      type=\"submit\"\n      fullWidth\n      variant=\"contained\"\n      color=\"primary\"\n      className={styles.root}\n      {...props}>\n      {children}\n    </Button>\n  )\n}\n\nexport default PrimaryButton\n","import * as yup from 'yup'\n\nconst defaultValues = {\n  title: '',\n  description: '',\n  additionalNotes: '',\n  tags: [],\n  targetCourses: []\n}\n\nconst basicSchemaObj = {\n  title: yup.string().required('Topic must have a title'),\n  description: yup.string().required('Toic must have a description'),\n  tags: yup\n    .array(yup.string())\n    .min(1, 'You must specify at least one tag for your Topic'),\n  additionalNotes: yup.string(),\n  targetCourses: yup.array(yup.string())\n}\n\nconst formSchema = yup.object().shape({ ...basicSchemaObj })\n\nconst editFormSchema = yup.object().shape({\n  ...basicSchemaObj,\n  status: yup\n    .string()\n    .oneOf([\n      'draft',\n      'suggestion',\n      'active',\n      'archived',\n      'assigned',\n      'prev_term'\n    ])\n})\n\nexport { formSchema, editFormSchema, defaultValues }\n","/* eslint-disable react/display-name */\nimport React, { forwardRef } from 'react'\nimport TextField from '@material-ui/core/TextField'\n\nconst Input = forwardRef((props, ref) => {\n  return (\n    <TextField\n      variant=\"outlined\"\n      margin=\"normal\"\n      inputRef={ref}\n      fullWidth\n      inputProps={{ readOnly: props.readOnly === true }}\n      {...props}\n    />\n  )\n})\n\nexport default Input\n","/* eslint-disable react/display-name */\nimport React, { forwardRef } from 'react'\nimport TextField from '@material-ui/core/TextField'\n\nconst MultiLineInput = forwardRef((props, ref) => {\n  return (\n    <TextField\n      variant=\"outlined\"\n      margin=\"normal\"\n      inputRef={ref}\n      fullWidth\n      multiline\n      rows={3}\n      rowsMax={6}\n      inputProps={{ readOnly: props.readOnly === true }}\n      {...props}\n    />\n  )\n})\n\nexport default MultiLineInput\n","import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { TreeSelect } from 'antd'\nimport 'antd/dist/antd.css'\n\nimport { Typography, FormHelperText } from '@material-ui/core'\nimport api from '../utils/api.axios'\n\nconst { SHOW_PARENT } = TreeSelect\n\nconst Tags = props => {\n  const [treeData, setTreeData] = useState(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    api\n      .get('/tag')\n      .then(res => {\n        setTreeData(res.data)\n      })\n      .catch(err => {\n        console.log(err)\n      })\n      .finally(() => {\n        setLoading(false)\n      })\n  }, [])\n\n  let tProps = {\n    value: props.value,\n    onChange: props.onChange,\n    treeCheckable: true,\n    showCheckedStrategy: SHOW_PARENT,\n    placeholder: 'Search Topic Tags',\n    bordered: true,\n    showSearch: true,\n    size: 'large'\n  }\n\n  if (loading) {\n    return (\n      <Typography varaint=\"body1\" style={{ marginLeft: '5px' }}>\n        Loading Tags List...\n      </Typography>\n    )\n  }\n\n  let style = {\n    margin: '10px 0'\n  }\n\n  // TODO: Clean up how the tags are highlighted for errors\n\n  if (props.error) {\n    style.border = 'solid 1px red'\n    style.borderRadius = '5px'\n  }\n\n  return (\n    <div style={style}>\n      <TreeSelect\n        {...tProps}\n        treeData={treeData}\n        style={{\n          width: '100%',\n          pointerEvents: props.disabled ? 'none' : 'auto'\n        }}\n      />\n      {props.error && (\n        <FormHelperText error={props.error}>{props.helperText}</FormHelperText>\n      )}\n    </div>\n  )\n}\n\nTags.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  value: PropTypes.array.isRequired,\n  disabled: PropTypes.bool,\n  error: PropTypes.bool,\n  helperText: PropTypes.string\n}\n\nexport default Tags\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Controller } from 'react-hook-form'\r\n\r\nimport { Autocomplete } from '@material-ui/lab'\r\nimport Input from './Input'\r\n\r\n// TODO: Load courses from DB\r\nconst courses = [\r\n  'LM051 - Computer Systems',\r\n  'LM052 - Course 2',\r\n  'Lm053 - Course 3'\r\n]\r\n\r\nconst TargetCoursesInput = ({\r\n  control,\r\n  error,\r\n  helperText,\r\n  disabled,\r\n  label\r\n}) => {\r\n  return (\r\n    <Controller\r\n      render={({ onChange, value }) => (\r\n        <Autocomplete\r\n          multiple\r\n          value={value}\r\n          options={courses}\r\n          getOptionLabel={option => option}\r\n          defaultValue={value}\r\n          disabled={disabled}\r\n          filterSelectedOptions\r\n          renderInput={params => (\r\n            <Input\r\n              {...params}\r\n              variant=\"outlined\"\r\n              label={label || 'Choose a Course'}\r\n              placeholder=\"Course\"\r\n              error={error}\r\n              helperText={helperText}\r\n            />\r\n          )}\r\n          onChange={(_, data) => onChange(data)}\r\n        />\r\n      )}\r\n      name=\"targetCourses\"\r\n      control={control}\r\n    />\r\n  )\r\n}\r\n\r\nTargetCoursesInput.propTypes = {\r\n  control: PropTypes.object.isRequired,\r\n  error: PropTypes.bool,\r\n  disabled: PropTypes.bool,\r\n  helperText: PropTypes.string\r\n}\r\n\r\nexport default TargetCoursesInput\r\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport { useForm, Controller } from 'react-hook-form'\nimport * as _ from 'lodash'\n\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  IconButton,\n  Button,\n  DialogActions,\n  Divider,\n  FormControl,\n  Select,\n  MenuItem,\n  CircularProgress,\n  Typography\n} from '@material-ui/core'\nimport { Edit, Cancel } from '@material-ui/icons'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { green } from '@material-ui/core/colors'\n\nimport api from '../../utils/api.axios'\nimport { yupResolver } from '@hookform/resolvers/yup'\nimport { editFormSchema } from '../../utils/yupSchemas/yupTopicSchema.js'\n\nimport Input from '../Input'\nimport MultiLineInput from '../MultiLineInput'\nimport PrimaryButton from '../PrimaryButton'\nimport Tags from '../Tags'\nimport TargetCoursesInput from '../TargetCoursesInput'\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    minWidth: 300,\n    flex: 1\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2)\n  },\n  readOnlySelect: {\n    width: 300,\n    '&.Mui-disabled option': {\n      color: 'black'\n    }\n  },\n  buttonProgress: {\n    color: green[500],\n    position: 'absolute',\n    left: '50%'\n  },\n  dialogCloseButton: {\n    position: 'absolute',\n    top: theme.spacing(1),\n    right: theme.spacing(1),\n    color: theme.palette.grey[500],\n    fontSize: '28px'\n  },\n  dialogEditButton: {\n    marginBottom: theme.spacing(1)\n  }\n}))\n\nconst TopicModal = props => {\n  const classes = useStyles()\n\n  const defaultValues = (({\n    title,\n    description,\n    tags,\n    additionalNotes,\n    targetCourses,\n    status\n  }) => ({\n    title,\n    description,\n    tags,\n    additionalNotes: additionalNotes || '',\n    targetCourses: targetCourses || [],\n    status\n  }))(props.topic)\n\n  const [editMode, setEditMode] = useState(false)\n  const [savingChanges, setSavingChanges] = useState(false)\n\n  const { register, handleSubmit, errors, control } = useForm({\n    resolver: yupResolver(editFormSchema),\n    reValidateMode: 'onChange',\n    defaultValues\n  })\n\n  const toggleEditMode = () => {\n    let edtmd = !editMode\n    setEditMode(edtmd)\n  }\n\n  const compareDiffs = data => {\n    let differences = _.reduce(\n      data,\n      function (result, value, key) {\n        // Compare data and props.topics properties\n        if (!_.isEqual(value, props.topic[key])) result[key] = value\n        return result\n      },\n      {}\n    )\n\n    console.log(differences)\n\n    return Object.keys(differences).length > 0 ? differences : null\n  }\n\n  const onSubmit = data => {\n    let differences = compareDiffs(data)\n\n    console.log(differences)\n\n    if (differences) {\n      api\n        .post(`/topic/edit/${props.topic._id}`, differences)\n        .then(res => {\n          console.log(res)\n          props.refresh()\n        })\n        .catch(err => {\n          console.log(err)\n        })\n        .finally(() => {\n          setSavingChanges(false)\n          toggleEditMode()\n        })\n    } else {\n      toggleEditMode()\n    }\n  }\n\n  return (\n    <Dialog\n      fullWidth\n      maxWidth=\"lg\"\n      open={props.dialogOpen}\n      onClose={() => {\n        console.log('impement dialog close')\n      }}\n      aria-labelledby=\"max-width-dialog-title\"\n      style={{ zIndex: '900 !important' }}\n      disableBackdropClick>\n      <IconButton\n        className={classes.dialogCloseButton}\n        onClick={() => {\n          if (\n            editMode &&\n            // eslint-disable-next-line no-restricted-globals\n            confirm(\n              'Unsaved changes will be lost!. Are you sure you want to exit?'\n            ) === false\n          ) {\n            return\n          }\n\n          props.setDialogOpen(false)\n        }}\n        disabled={savingChanges}>\n        <Cancel />\n      </IconButton>\n      <DialogTitle id=\"max-width-dialog-title\">\n        <Button\n          variant=\"contained\"\n          className={classes.dialogEditButton}\n          color={editMode ? 'secondary' : 'primary'}\n          onClick={toggleEditMode}\n          disabled={savingChanges}\n          endIcon={<Edit />}>\n          Toggle Edit Mode\n        </Button>\n        <Divider />\n      </DialogTitle>\n      <DialogContent>\n        <form onSubmit={handleSubmit(onSubmit)}>\n          {props.topic.type === 'regular' ? (\n            <>\n              <div\n                style={{\n                  display: 'flex',\n                  flexDirection: 'row',\n                  alignItems: 'stretch',\n                  width: '100%'\n                }}>\n                <Input\n                  ref={register}\n                  name=\"title\"\n                  label=\"Title\"\n                  disabled={!editMode}\n                  variant=\"outlined\"\n                  margin=\"none\"\n                  style={{ flex: '3', marginRight: '40px' }}\n                  error={!!errors.title}\n                  helperText={errors?.title?.message}\n                />\n                <FormControl variant=\"outlined\" className={classes.formControl}>\n                  <Controller\n                    render={({ onChange, value }) => (\n                      <Select\n                        disabled={!editMode}\n                        value={value}\n                        onChange={onChange}>\n                        <MenuItem value=\"draft\">Draft</MenuItem>\n                        <MenuItem value=\"suggestion\">\n                          Ready for Submission\n                        </MenuItem>\n                        <MenuItem value=\"archived\" style={{ color: 'red' }}>\n                          Archived\n                        </MenuItem>\n                        <MenuItem value=\"active\" disabled>\n                          Active\n                        </MenuItem>\n                        <MenuItem value=\"assigned\" disabled>\n                          Assigned\n                        </MenuItem>\n                        <MenuItem value=\"prev_term\" disabled>\n                          From Previous Term\n                        </MenuItem>\n                      </Select>\n                    )}\n                    name=\"status\"\n                    control={control}\n                    error={!!errors.status}\n                    helperText={errors?.status?.message}\n                  />\n                </FormControl>\n              </div>\n              <MultiLineInput\n                inputRef={register}\n                name=\"description\"\n                label=\"Description\"\n                disabled={!editMode}\n                error={!!errors.description}\n                helperText={errors?.description?.message}\n              />\n\n              <Controller\n                control={control}\n                name=\"tags\"\n                render={({ onChange, value }) => (\n                  <Tags\n                    value={value}\n                    onChange={vals => {\n                      onChange(vals)\n                    }}\n                    error={!!errors?.tags}\n                    helperText={errors?.tags?.message}\n                    disabled={!editMode}\n                  />\n                )}\n              />\n\n              <MultiLineInput\n                inputRef={register}\n                label=\"Additional Notes\"\n                name=\"additionalNotes\"\n                disabled={!editMode}\n                error={!!errors.additionalNotes}\n                helperText={errors?.additionalNotes?.message}\n              />\n\n              <TargetCoursesInput\n                control={control}\n                error={!!errors.targetCourses}\n                helperText={errors?.targetCourses?.message}\n                disabled={!editMode}\n              />\n            </>\n          ) : (\n            <>\n              <Input\n                label=\"Title\"\n                value={defaultValues.title}\n                variant=\"outlined\"\n                margin=\"none\"\n                inputProps={{ readOnly: true }}\n              />\n              <MultiLineInput\n                inputRef={register}\n                name=\"description\"\n                label=\"Description\"\n                disabled={!editMode}\n                error={!!errors.description}\n                helperText={errors?.description?.message}\n              />\n\n              <Controller\n                control={control}\n                name=\"tags\"\n                render={({ onChange, value }) => (\n                  <Tags\n                    value={value}\n                    onChange={vals => {\n                      onChange(vals)\n                    }}\n                    error={!!errors?.tags}\n                    helperText={errors?.tags?.message}\n                    disabled={!editMode}\n                  />\n                )}\n              />\n\n              <MultiLineInput\n                inputRef={register}\n                label=\"Additional Notes\"\n                name=\"additionalNotes\"\n                disabled={!editMode}\n                error={!!errors.additionalNotes}\n                helperText={errors?.additionalNotes?.message}\n              />\n\n              <TargetCoursesInput\n                control={control}\n                error={!!errors.targetCourses}\n                helperText={errors?.targetCourses?.message}\n                disabled={!editMode}\n              />\n            </>\n          )}\n\n          {editMode && (\n            <PrimaryButton disabled={savingChanges}>Save Changes</PrimaryButton>\n          )}\n        </form>\n      </DialogContent>\n      <DialogActions>\n        {editMode ? (\n          <>\n            {savingChanges && (\n              <CircularProgress size={24} className={classes.buttonProgress} />\n            )}\n          </>\n        ) : null}\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nTopicModal.defaultProps = {\n  topic: {},\n  dialogOpen: false,\n  setDialogOpen: () => {},\n  refresh: () => {}\n}\n\nTopicModal.propTypes = {\n  topic: PropTypes.object.isRequired,\n  dialogOpen: PropTypes.bool.isRequired,\n  setDialogOpen: PropTypes.func.isRequired,\n  refresh: PropTypes.func.isRequired\n}\n\nexport default TopicModal\n","import React, { useState, useEffect, useContext } from 'react'\nimport PropTypes from 'prop-types'\nimport { Link, useHistory } from 'react-router-dom'\n\nimport {\n  Container,\n  Typography,\n  Checkbox,\n  FormControlLabel,\n  Button,\n  TableContainer,\n  Table,\n  TableHead,\n  TableCell,\n  TableRow,\n  TableBody,\n  Paper,\n  Link as MuiLink,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Switch\n} from '@material-ui/core'\n\nimport { PhaseContext } from '../../contexts/PhaseContext'\n\nimport api from '../../utils/api.axios'\nimport { topicStatusToHumanFriendlyString } from '../../utils/topic'\n\nimport { Can } from '../../Auth/Can'\n\nimport PrimaryButton from '../PrimaryButton'\nimport TopicModal from './TopicModal'\n\nconst SubmissionDialog = props => {\n  return (\n    <Dialog open={props.open} aria-labelledby=\"form-dialog-title\">\n      <DialogTitle id=\"form-dialog-title\">Submit Topic Suggestions</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Are you sure you want to submit your topic suggestions?\n          <br />\n          <b>This can not be reverted</b>\n        </DialogContentText>\n        <FormControlLabel\n          control={\n            <Checkbox\n              checked={props.checked}\n              onChange={e => props.setChecked(e.target.checked)}\n            />\n          }\n          label=\"I understand\"\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={() => props.setOpen(false)} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={() => {\n            props.setOpen(false)\n            props.proceed()\n          }}\n          color=\"primary\"\n          disabled={!props.checked}>\n          Proceed\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nSubmissionDialog.propTypes = {\n  open: PropTypes.bool.isRequired,\n  setOpen: PropTypes.func.isRequired,\n  checked: PropTypes.bool.isRequired,\n  setChecked: PropTypes.func.isRequired,\n  setDialogOpen: PropTypes.func.isRequired,\n  proceed: PropTypes.func.isRequired\n}\n\nexport default function TopicManagement(props) {\n  const [topics, setTopics] = useState([])\n  const [customTopic, setCustomTopic] = useState(false)\n  const [loading, setLoading] = useState(true)\n  const [dialogOpen, setDialogOpen] = useState(false)\n  const [selectedTopic, setSelectedTopic] = useState(null)\n\n  const [submissionDialogOpen, setSubmissionDialogOpen] = useState(false)\n  const [proceedSubmissionChecked, setProceedSubmissionChecked] = useState(\n    false\n  )\n  const [submittingTopics, setSubmittingTopics] = useState(false)\n  const [submitAllowed, setSubmitAllowed] = useState(false)\n\n  const { currentPhase } = useContext(PhaseContext)\n  const history = useHistory()\n\n  useEffect(() => {\n    refreshTopicList()\n\n    api\n      .get('/me/studentProjectAvailibility')\n      .then(res => {\n        console.log(res)\n\n        setCustomTopic(res.data.topic)\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }, [])\n\n  const refreshTopicList = () => {\n    api\n      .get('/topic/me')\n      .then(res => {\n        console.log(res)\n\n        let retrievedTopics = []\n        let customTopic = false\n\n        let hasSuggestionReady = false\n\n        res.data.topics.forEach(topic => {\n          if (topic.type === 'regular') {\n            retrievedTopics.push(topic)\n          } else if (\n            topic.type === 'studentTopic' &&\n            topic.status !== 'archived'\n          ) {\n            customTopic = topic\n          } else {\n            console.error('Unknown topic type')\n            console.log(topic)\n          }\n\n          if (topic.status === 'suggestion') {\n            hasSuggestionReady = true\n          }\n        })\n\n        setSubmitAllowed(hasSuggestionReady)\n\n        setTopics(retrievedTopics)\n        setCustomTopic(customTopic)\n\n        // If a topic is currently selected, update it to the newly returned topic\n        if (selectedTopic) {\n          setSelectedTopic(\n            res.data.topics.filter(topic => {\n              return topic._id === selectedTopic._id\n            })[0]\n          )\n        }\n      })\n      .catch(err => {\n        console.log(err)\n      })\n      .finally(() => {\n        setLoading(false)\n      })\n  }\n\n  const handlePreSubmitTopics = e => {\n    let hasSuggestion = false\n    for (let topic of topics) {\n      if (topic.status === 'suggestion') {\n        hasSuggestion = true\n        break\n      }\n    }\n\n    if (hasSuggestion) {\n      setSubmissionDialogOpen(true)\n    } else {\n      alert(\n        'You must have at least one topic marked as \"Ready for Submision\" before you submit your topics'\n      )\n    }\n  }\n\n  const handleSubmitTopics = () => {\n    if (proceedSubmissionChecked) {\n      console.log('Submit topics')\n\n      setSubmittingTopics(true)\n\n      api\n        .post('/topic/submit')\n        .then(res => {\n          console.log(res)\n        })\n        .catch(err => console.log(err))\n        .finally(() => {\n          setSubmittingTopics(false)\n          refreshTopicList()\n        })\n    }\n  }\n\n  const openTopicDetailsDialog = topic => {\n    console.log(topic)\n    setSelectedTopic(topic)\n    setDialogOpen(true)\n  }\n\n  const handleSuperviseStudentProjectChange = e => {\n    let body = {\n      active: e.target.checked\n    }\n\n    console.log(body)\n\n    api\n      .post('/supervisor/me/studentProjectAvailibility', body)\n      .then(res => {\n        refreshTopicList()\n      })\n      .catch(err => console.log(err))\n      .finally(() => {})\n  }\n\n  if (loading) {\n    return <Typography>Loading ...</Typography>\n  }\n\n  if (submittingTopics) {\n    return <Typography>Submitting Topics ...</Typography>\n  }\n\n  return (\n    <>\n      {selectedTopic ? (\n        <TopicModal\n          key={selectedTopic._id}\n          dialogOpen={dialogOpen}\n          setDialogOpen={setDialogOpen}\n          topic={selectedTopic}\n          refresh={refreshTopicList}\n        />\n      ) : null}\n      <SubmissionDialog\n        open={submissionDialogOpen}\n        setOpen={setSubmissionDialogOpen}\n        checked={proceedSubmissionChecked}\n        setChecked={setProceedSubmissionChecked}\n        proceed={handleSubmitTopics}\n      />\n      <Container maxWidth=\"lg\">\n        <Can I=\"takeActionPhaseTwo\" this={currentPhase}>\n          <Typography>\n            Do you want to be available to supervise student defined projects?\n            (Custom Student Projects)\n          </Typography>\n          <FormControlLabel\n            control={\n              <Switch\n                checked={customTopic}\n                onChange={handleSuperviseStudentProjectChange}\n              />\n            }\n            label=\"Supervise Student Defined Projects\"\n          />\n        </Can>\n\n        <TableContainer component={Paper} style={{ margin: '20px 0' }}>\n          <Table style={{ minWidth: '650px' }} size=\"small\">\n            <TableHead>\n              <TableRow>\n                <TableCell>Title</TableCell>\n                <TableCell align=\"center\">Status</TableCell>\n                <TableCell align=\"right\">\n                  {currentPhase.phase === 4 ? 'Proposals' : 'Actions'}\n                </TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {topics.length === 0 ? (\n                <TableRow>\n                  <TableCell\n                    component=\"th\"\n                    scope=\"row\"\n                    align=\"center\"\n                    colSpan={3}>\n                    <Typography>No Topics to display</Typography>\n                  </TableCell>\n                </TableRow>\n              ) : (\n                topics.map(topic => (\n                  <TableRow key={topic._id}>\n                    <TableCell component=\"th\" scope=\"row\">\n                      <MuiLink onClick={() => openTopicDetailsDialog(topic)}>\n                        {topic.title}\n                      </MuiLink>\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      {topicStatusToHumanFriendlyString(topic.status)}\n                    </TableCell>\n                    {currentPhase.phase === 4 ? (\n                      <TableCell align=\"right\">\n                        <Can I=\"takeActionPhaseFour\" this={currentPhase}>\n                          <Link to={`/topic/${topic._id}`}>6 Submissions</Link>\n                        </Can>\n                      </TableCell>\n                    ) : (\n                      <TableCell align=\"right\">\n                        <Button variant=\"contained\">Next Step</Button>\n                      </TableCell>\n                    )}\n                  </TableRow>\n                ))\n              )}\n\n              {customTopic ? (\n                <TableRow key={customTopic._id}>\n                  <TableCell component=\"th\" scope=\"row\">\n                    <MuiLink\n                      onClick={() => openTopicDetailsDialog(customTopic)}>\n                      {customTopic.title}\n                    </MuiLink>\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    {topicStatusToHumanFriendlyString(customTopic.status)}\n                  </TableCell>\n                  <TableCell align=\"right\">\n                    <Can I=\"takeActionPhaseFour\" this={currentPhase}>\n                      <Link to={`/topic/${customTopic._id}`}>\n                        6 Submissions\n                      </Link>\n                    </Can>\n                  </TableCell>\n                </TableRow>\n              ) : null}\n            </TableBody>\n          </Table>\n        </TableContainer>\n\n        <Can I=\"takeActionPhaseTwo\" this={currentPhase}>\n          <div style={{ display: 'flex', flexDirection: 'row' }}>\n            <PrimaryButton\n              type=\"button\"\n              onClick={() => history.push('/topics/add')}\n              variant=\"outlined\"\n              style={{ flex: 1, flexGrow: 4 }}>\n              Add new Topic Suggestion\n            </PrimaryButton>\n\n            {/* TODO: Inform user why the button is disabled */}\n            <PrimaryButton\n              disabled={!submitAllowed}\n              onClick={handlePreSubmitTopics}\n              style={{ flex: 1, flexGrow: 4 }}>\n              Submit Suggestions\n            </PrimaryButton>\n          </div>\n        </Can>\n\n        <Typography>Editing a Topic</Typography>\n        <Typography variant=\"paragraph\">\n          To edit a topic click on the `Topic Title` link on the table above. A\n          popup should be displayed containing all the Topic information. Click\n          the `Edit (Pencil)` icon in the top left to begin editing. Make any\n          necessary changes to the topic, then click the `Save Changes` button\n          at the bottom of the popup. To close the popup click the `Exit (X)`\n          icon in the top left.\n        </Typography>\n        <Typography>Viewing Topic proposals</Typography>\n        <Typography variant=\"paragraph\">\n          *Note: Viewing topic proposals will only become available during phase\n          4. <br />\n          <Link to=\"/help/phases\">What are Phases?</Link>\n          <br />\n          To view all proposals students have sent to your topics, click on the\n          link below the `Proposals` on the above table.\n        </Typography>\n      </Container>\n    </>\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { useForm, Controller } from 'react-hook-form'\nimport {\n  Container,\n  Paper,\n  Typography,\n  Box,\n  TableContainer,\n  Table,\n  TableHead,\n  TableBody,\n  TableCell,\n  TableRow,\n  Link as MuiLink,\n  Select,\n  MenuItem,\n  FormControl\n} from '@material-ui/core'\n\nimport api from '../utils/api.axios'\nimport Tags from './Tags'\nimport PrimaryButton from './PrimaryButton'\n\nconst defaultValues = {\n  tags: [],\n  supervisor: 'unspecified',\n  topicType: 'all'\n}\n\nexport default function TopicList(props) {\n  const [topics, setTopics] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [supervisors, setSupervisors] = useState([])\n\n  const { handleSubmit, errors, control } = useForm({\n    reValidateMode: 'onChange',\n    defaultValues\n  })\n\n  useEffect(() => {\n    api\n      .post('/topic/search')\n      .then(res => {\n        console.log(res)\n        if (res.data?.topics) {\n          setTopics(res.data.topics)\n        }\n      })\n      .catch(err => {\n        console.log(err)\n      })\n      .finally(() => {\n        setLoading(false)\n      })\n\n    api\n      .get('/supervisor/list')\n      .then(res => {\n        console.log(res)\n\n        setSupervisors(res.data.supervisors)\n      })\n      .catch(err => {\n        console.log(err)\n      })\n      .finally(() => {})\n  }, [])\n\n  const handleSearch = data => {\n    console.log(data)\n\n    let query = { tags: null, supervisor: null, topicType: null }\n\n    if (data.tags.length > 0) {\n      query.tags = [...data.tags]\n    }\n\n    if (data.supervisor !== 'unspecified') {\n      query.supervisor = data.supervisor\n    }\n\n    query.topicType = data.topicType\n\n    console.log('Querying DB for', query)\n\n    api\n      .post('/topic/search', query)\n      .then(res => {\n        console.log(res)\n\n        setTopics(res.data.topics)\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }\n\n  return (\n    <Container maxWidth=\"lg\">\n      <Typography variant=\"h3\" component=\"h1\">\n        Topic List\n      </Typography>\n\n      <form onSubmit={handleSubmit(handleSearch)}>\n        <Controller\n          control={control}\n          name=\"tags\"\n          render={({ onChange, value }) => (\n            <Tags\n              value={value}\n              onChange={vals => {\n                onChange(vals)\n              }}\n              error={!!errors?.tags}\n              helperText={errors?.tags?.message}\n            />\n          )}\n        />\n\n        <FormControl variant=\"outlined\">\n          <label>Supervisor</label>\n          <Controller\n            render={({ onChange, value }) => (\n              <Select value={value} onChange={onChange}>\n                <MenuItem value=\"unspecified\" key=\"unspecified\" selected>\n                  None\n                </MenuItem>\n                {supervisors.map(supervisor => (\n                  <MenuItem value={supervisor._id} key={supervisor._id}>\n                    {supervisor.displayName}\n                  </MenuItem>\n                ))}\n              </Select>\n            )}\n            name=\"supervisor\"\n            control={control}\n          />\n        </FormControl>\n\n        <FormControl variant=\"outlined\">\n          <label>Topic Type</label>\n          <Controller\n            render={({ onChange, value }) => (\n              <Select value={value} onChange={onChange}>\n                <MenuItem value=\"all\" key=\"all\" selected>\n                  All\n                </MenuItem>\n                <MenuItem value=\"regular\" key=\"regular\">\n                  Supervisor Defined\n                </MenuItem>\n                <MenuItem value=\"studentTopic\" key=\"studentTopic\">\n                  Student Defined\n                </MenuItem>\n              </Select>\n            )}\n            name=\"topicType\"\n            control={control}\n          />\n        </FormControl>\n\n        <PrimaryButton>Search</PrimaryButton>\n      </form>\n\n      <TableContainer component={Paper} style={{ margin: '20px 0' }}>\n        <Table style={{ minWidth: '650px' }} size=\"medium\">\n          <TableHead>\n            <TableRow>\n              <TableCell colSpan={5}>\n                {`Found ${topics.length} matching topics`}\n              </TableCell>\n            </TableRow>\n          </TableHead>\n\n          <TableBody>\n            {topics.length === 0 ? (\n              <TableRow>\n                <TableCell\n                  component=\"th\"\n                  scope=\"row\"\n                  align=\"center\"\n                  colSpan={3}>\n                  <Typography>\n                    {loading ? 'Loading Topics ...' : 'No Topics to display'}\n                  </Typography>\n                </TableCell>\n              </TableRow>\n            ) : (\n              topics.map(topic => (\n                <TableRow key={topic.code}>\n                  <TableCell component=\"th\" scope=\"row\">\n                    <Link to={'./topics/view/' + topic.code}>\n                      <MuiLink component=\"p\">{topic.title}</MuiLink>\n                    </Link>\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    {topic.supervisor.displayName} - {topic.supervisor.abbr}\n                  </TableCell>\n                  <TableCell align=\"center\">{topic.code}</TableCell>\n                  <TableCell>\n                    <div\n                      style={{\n                        display: 'flex',\n                        flexDirection: 'row',\n                        alignContent: 'center',\n                        justifyContent: 'right'\n                      }}>\n                      {topic.tags.slice(0, 3).map(tag => (\n                        <Box\n                          key={tag}\n                          style={{\n                            backgroundColor: '#dbdbdb',\n                            color: '#5b5b5b',\n                            margin: '0 3px',\n                            padding: '4px',\n                            borderRadius: '3px'\n                          }}>\n                          {tag}\n                        </Box>\n                      ))}\n                      {topic.tags.length > 3 ? (\n                        <Box\n                          key={'additional_tags'}\n                          style={{\n                            backgroundColor: '#dbdbdb',\n                            color: '#5b5b5b',\n                            margin: '0 3px',\n                            padding: '4px',\n                            borderRadius: '3px'\n                          }}>\n                          {'+ ' + (topic.tags.length - 3) + ' more'}\n                        </Box>\n                      ) : null}\n                    </div>\n                  </TableCell>\n                  <TableCell align=\"right\">\n                    {topic.proposalCount} Students have shown interest\n                  </TableCell>\n                </TableRow>\n              ))\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </Container>\n  )\n}\n","import React from 'react'\nimport api from '../utils/api.axios'\nimport { useForm, Controller } from 'react-hook-form'\nimport { yupResolver } from '@hookform/resolvers/yup'\n\nimport {\n  Container,\n  Typography,\n  Switch,\n  FormControlLabel\n} from '@material-ui/core'\n\nimport { formSchema, defaultValues } from '../utils/yupSchemas/yupTopicSchema'\n\nimport PrimaryButton from './PrimaryButton'\nimport Input from './Input'\nimport MultiLineInput from './MultiLineInput'\nimport Tags from './Tags'\nimport TargetCoursesInput from './TargetCoursesInput'\n\nconst AddTopicForm = props => {\n  const { register, handleSubmit, errors, control } = useForm({\n    resolver: yupResolver(formSchema),\n    reValidateMode: 'onChange',\n    defaultValues\n  })\n\n  const onSubmit = data => {\n    console.log(data)\n\n    api\n      .post('/topic/add', data)\n      .then(resp => {\n        console.log(resp)\n        alert('Topic has been sucessfully added')\n\n        // TODO: Redirect user to topic management screen\n      })\n      .catch(err => console.log(err))\n  }\n\n  return (\n    <Container component=\"main\" maxWidth=\"md\">\n      <Typography component=\"h1\" variant=\"h4\" align=\"center\">\n        Create new Topic\n      </Typography>\n      <form onSubmit={handleSubmit(onSubmit)} autoComplete=\"off\">\n        <Input\n          inputRef={register}\n          type=\"text\"\n          name=\"title\"\n          label=\"Title\"\n          error={!!errors.title}\n          helperText={errors?.title?.message}\n        />\n        <MultiLineInput\n          inputRef={register}\n          type=\"text\"\n          name=\"description\"\n          label=\"Description\"\n          error={!!errors.description}\n          helperText={errors?.description?.message}\n        />\n\n        <Controller\n          control={control}\n          name=\"tags\"\n          render={({ onChange, value }) => (\n            <Tags\n              value={value}\n              onChange={vals => {\n                onChange(vals)\n              }}\n              error={!!errors?.tags}\n              helperText={errors?.tags?.message}\n            />\n          )}\n        />\n\n        <MultiLineInput\n          inputRef={register}\n          type=\"text\"\n          name=\"additionalNotes\"\n          label=\"Additional Notes (Optional)\"\n          error={!!errors.additionalNotes}\n          helperText={errors?.additionalNotes?.message}\n        />\n\n        <TargetCoursesInput\n          control={control}\n          label=\"Target Courses (Optional)\"\n          error={!!errors.targetCourses}\n          helperText={errors?.targetCourses?.message}\n        />\n\n        <PrimaryButton>Add Topic</PrimaryButton>\n      </form>\n    </Container>\n  )\n}\n\nexport default AddTopicForm\n","import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { makeStyles } from '@material-ui/core/styles'\n\n/**\n * Note :\n * If you're using react v 15.4 or less\n * You can directly import PropTypes from react instead.\n * Refer to this : https://reactjs.org/warnings/dont-call-proptypes.html\n */\n\nconst useStyles = makeStyles(theme => ({\n  countdown: {\n    margin: '10px auto',\n    paddingBottom: '20px',\n    textAlign: 'center'\n  },\n\n  countdownCol: {\n    display: 'inline-block'\n  },\n\n  countdownColElement: {\n    margin: '0 20px',\n    display: 'flex',\n    flexDirection: 'column',\n    '& strong': {\n      fontSize: '50px'\n    }\n  }\n}))\n\nconst Countdown = props => {\n  const [timeLeft, setTimeLeft] = useState({\n    days: ' - ',\n    hours: ' - ',\n    min: ' - ',\n    sec: ' - '\n  })\n  const [interval, updateInterval] = useState()\n\n  const classes = useStyles()\n\n  useEffect(() => {\n    // update every second\n    updateInterval(\n      setInterval(() => {\n        const date = calculateCountdown(props.date)\n        date ? setTimeLeft(date) : stop()\n      }, 1000)\n    )\n  }, [])\n\n  const calculateCountdown = endDate => {\n    let diff = (Date.parse(new Date(endDate)) - Date.parse(new Date())) / 1000\n\n    // clear countdown when date is reached\n    if (diff <= 0) return false\n\n    const timeLeft = {\n      years: 0,\n      days: 0,\n      hours: 0,\n      min: 0,\n      sec: 0\n    }\n\n    // calculate time difference between now and expected date\n    if (diff >= 365.25 * 86400) {\n      // 365.25 * 24 * 60 * 60\n      timeLeft.years = Math.floor(diff / (365.25 * 86400))\n      diff -= timeLeft.years * 365.25 * 86400\n    }\n    if (diff >= 86400) {\n      // 24 * 60 * 60\n      timeLeft.days = Math.floor(diff / 86400)\n      diff -= timeLeft.days * 86400\n    }\n    if (diff >= 3600) {\n      // 60 * 60\n      timeLeft.hours = Math.floor(diff / 3600)\n      diff -= timeLeft.hours * 3600\n    }\n    if (diff >= 60) {\n      timeLeft.min = Math.floor(diff / 60)\n      diff -= timeLeft.min * 60\n    }\n    timeLeft.sec = diff\n\n    return timeLeft\n  }\n\n  const stop = () => {\n    clearInterval(interval)\n  }\n\n  const addLeadingZeros = value => {\n    value = String(value)\n    while (value.length < 2) {\n      value = '0' + value\n    }\n    return value\n  }\n\n  return (\n    <div className={classes.countdown}>\n      <span className={classes.countdownCol}>\n        <span className={classes.countdownColElement}>\n          <strong>{addLeadingZeros(timeLeft.days)}</strong>\n          <span>{timeLeft.days === 1 ? 'Day' : 'Days'}</span>\n        </span>\n      </span>\n\n      <span className={classes.countdownCol}>\n        <span className={classes.countdownColElement}>\n          <strong>{addLeadingZeros(timeLeft.hours)}</strong>\n          <span>Hours</span>\n        </span>\n      </span>\n\n      <span className={classes.countdownCol}>\n        <span className={classes.countdownColElement}>\n          <strong>{addLeadingZeros(timeLeft.min)}</strong>\n          <span>Min</span>\n        </span>\n      </span>\n\n      <span className={classes.countdownCol}>\n        <span className={classes.countdownColElement}>\n          <strong>{addLeadingZeros(timeLeft.sec)}</strong>\n          <span>Sec</span>\n        </span>\n      </span>\n    </div>\n  )\n}\n\nCountdown.propTypes = {\n  date: PropTypes.string.isRequired\n}\n\nCountdown.defaultProps = {\n  date: new Date()\n}\n\nexport default Countdown\n","import React, { useContext } from 'react'\nimport { PhaseContext } from '../contexts/PhaseContext'\nimport { useMsal } from '@azure/msal-react'\n\nimport CountdownToDate from './CountdownToDate'\nimport { Typography, Container } from '@material-ui/core'\n\nconst phaseActions = {\n  1: ['Supervisors assigned to system', 'Students assigned to system'],\n  2: ['Topic suggestions drafting'],\n  3: ['TopicList available to be viewed', 'Student proposal drafting'],\n  4: ['Student proposal submission', 'Supervisors can respond to proposals']\n}\n\nfunction Welcome() {\n  const { currentPhase } = useContext(PhaseContext)\n\n  console.log(currentPhase)\n\n  return (\n    <Container maxWidth=\"lg\">\n      <Typography style={{ fontSize: '40px' }} align=\"center\">\n        Current Phase{' '}\n        <span style={{ fontWeight: 'bold' }}>{currentPhase.phase}</span>\n      </Typography>\n      <CountdownToDate date={currentPhase.endDate.toString()} />\n      <Typography style={{ fontSize: '35px' }} align=\"center\">\n        until next phase\n      </Typography>\n\n      <ul>\n        {phaseActions[currentPhase.phase].map(action => (\n          <li key={action}>{action}</li>\n        ))}\n      </ul>\n\n      {currentPhase.phase < 4 ? (\n        <>\n          <Typography align=\"center\">\n            Actions available in next phase\n          </Typography>\n          <ul>\n            {phaseActions[currentPhase.phase + 1].map(action => (\n              <li key={action}>{action}</li>\n            ))}\n          </ul>\n        </>\n      ) : null}\n    </Container>\n  )\n}\n\nexport default Welcome\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport PrimaryButton from '../../PrimaryButton'\n\nexport default function UploadButton(props) {\n  return (\n    <PrimaryButton disabled={props.disabled} onClick={props.onUpload}>\n      Upload All\n    </PrimaryButton>\n  )\n}\n\nUploadButton.propTypes = {\n  disabled: PropTypes.bool.isRequired,\n  onUpload: PropTypes.func.isRequired\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { CSVReader } from 'react-papaparse'\nimport * as yup from 'yup'\n\nimport Button from '@material-ui/core/Button'\n\nconst buttonRef = React.createRef()\n\nconst papaParseConfig = {\n  header: true\n}\n\nexport default function CSVUploader(props) {\n  const handleOpenDialog = e => {\n    // Note that the ref is set async, so it might be null at some point\n    if (buttonRef.current) {\n      buttonRef.current.open(e)\n    }\n  }\n\n  const handleOnFileLoaded = data => {\n    console.log(data)\n\n    let studentsArray = []\n    for (let entry of data) {\n      let email = entry.data.StudentEmail\n      // Skip any entries which are null or empty\n      if (!email || email === '') {\n        console.log(email, 'is being skipped')\n        continue\n      }\n\n      console.log(email)\n      studentsArray.push(email)\n    }\n\n    props.onAdd(studentsArray)\n  }\n\n  const handleOnError = (err, file, inputElem, reason) => {\n    console.log('---------------------------')\n    console.log(err)\n    console.log('---------------------------')\n  }\n\n  const handleOnRemoveFile = data => {\n    console.log('---------------------------')\n    console.log(data)\n    console.log('---------------------------')\n  }\n\n  const handleRemoveFile = e => {\n    // Note that the ref is set async, so it might be null at some point\n    if (buttonRef.current) {\n      buttonRef.current.removeFile(e)\n    }\n  }\n\n  return (\n    <>\n      <CSVReader\n        config={papaParseConfig}\n        ref={buttonRef}\n        onFileLoad={handleOnFileLoaded}\n        onError={handleOnError}\n        noClick\n        noDrag\n        noProgressBar\n        onRemoveFile={handleOnRemoveFile}>\n        {({ file }) => (\n          <aside\n            style={{\n              display: 'flex',\n              flexDirection: 'row',\n              marginBottom: 10\n            }}>\n            <Button\n              onClick={handleOpenDialog}\n              variant=\"contained\"\n              color=\"primary\"\n              style={{\n                borderRadius: 0,\n                marginTop: 5,\n                marginLeft: 0,\n                marginRight: 0,\n                width: '40%',\n                height: 50,\n                paddingLeft: 0,\n                paddingRight: 0\n              }}>\n              Browse file\n            </Button>\n            <div\n              style={{\n                borderWidth: 1,\n                borderStyle: 'solid',\n                borderColor: '#ccc',\n                height: 45,\n                lineHeight: 2.5,\n                marginTop: 5,\n                marginBottom: 5,\n                paddingLeft: 13,\n                paddingTop: 3,\n                width: '60%'\n              }}>\n              {file && file.name}\n            </div>\n            <Button\n              variant=\"contained\"\n              onClick={handleRemoveFile}\n              style={{\n                borderRadius: 0,\n                marginTop: 5,\n                marginLeft: 0,\n                marginRight: 0,\n                width: '10%',\n                height: 50,\n                paddingLeft: 0,\n                paddingRight: 0\n              }}>\n              Remove\n            </Button>\n          </aside>\n        )}\n      </CSVReader>\n    </>\n  )\n}\n\nCSVUploader.propTypes = {\n  onAdd: PropTypes.func.isRequired\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  Paper,\n  InputBase,\n  Tooltip,\n  Divider,\n  IconButton,\n  Checkbox\n} from '@material-ui/core'\nimport { makeStyles } from '@material-ui/styles'\nimport { AddCircle as AddCircleIcon } from '@material-ui/icons'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    padding: '2px 0px',\n    display: 'flex',\n    alignItems: 'center',\n    width: '100%'\n  },\n  input: {\n    marginLeft: theme.spacing(1),\n    flex: 1\n  },\n  iconButton: {\n    padding: 10\n  },\n  divider: {\n    height: 28,\n    margin: 4\n  }\n}))\n\nexport default function UserEmailInputField(props) {\n  const classes = useStyles()\n\n  return (\n    <Paper component=\"form\" className={classes.root}>\n      <InputBase\n        className={classes.input}\n        placeholder=\"Student Email\"\n        value={props.email}\n        inputProps={{ 'aria-label': 'Student Email' }}\n        endAdornment={props.endAdornment}\n        onChange={props.onChange}\n      />\n      <Tooltip\n        title=\"Include @studentmail prefix\"\n        aria-label=\"Include @studentmail prefix\">\n        <Checkbox\n          edge=\"start\"\n          disableRipple\n          checked={props.includeEmailPrefix}\n          onChange={props.onChangeEmailPrefix}\n        />\n      </Tooltip>\n      <Divider className={classes.divider} orientation=\"vertical\" />\n      <IconButton\n        className={classes.iconButton}\n        aria-label=\"search\"\n        onClick={props.onAdd}>\n        <AddCircleIcon />\n      </IconButton>\n    </Paper>\n  )\n}\n\nUserEmailInputField.propTypes = {\n  email: PropTypes.string.isRequired,\n  endAdornment: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  includeEmailPrefix: PropTypes.bool.isRequired,\n  onChangeEmailPrefix: PropTypes.func.isRequired,\n  onAdd: PropTypes.func.isRequired\n}\n","import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\n\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft'\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight'\n\nimport {\n  TableContainer,\n  Table,\n  TableHead,\n  TableBody,\n  TableFooter,\n  TablePagination,\n  TableCell,\n  TableRow,\n  Tooltip,\n  Paper,\n  IconButton,\n  Button\n} from '@material-ui/core'\nimport DeleteIcon from '@material-ui/icons/Delete'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexShrink: 0,\n    marginLeft: theme.spacing(2.5)\n  },\n  assigned: {\n    color: 'green'\n  },\n  not_found: {\n    color: 'red'\n  },\n  exists: {\n    color: 'orange'\n  },\n  no_assignment: {\n    color: 'red'\n  }\n}))\n\nfunction TablePaginationActions(props) {\n  const classes = useStyles()\n  const { count, page, rowsPerPage, onChangePage } = props\n\n  const handleBackButtonClick = event => {\n    onChangePage(event, page - 1)\n  }\n\n  const handleNextButtonClick = event => {\n    onChangePage(event, page + 1)\n  }\n\n  return (\n    <div className={classes.root}>\n      <IconButton\n        onClick={handleBackButtonClick}\n        disabled={page === 0}\n        aria-label=\"previous page\">\n        <KeyboardArrowLeft />\n      </IconButton>\n      <IconButton\n        onClick={handleNextButtonClick}\n        disabled={page >= Math.ceil(count / rowsPerPage) - 1}\n        aria-label=\"next page\">\n        <KeyboardArrowRight />\n      </IconButton>\n    </div>\n  )\n}\n\nTablePaginationActions.propTypes = {\n  count: PropTypes.number.isRequired,\n  onChangePage: PropTypes.func.isRequired,\n  page: PropTypes.number.isRequired,\n  rowsPerPage: PropTypes.number.isRequired\n}\n\nconst userTooltipTitles = {\n  exists: 'Exists: This user is already assigned this role',\n  not_found: 'Not Found: Email could not be linked to an active user account',\n  assigned: 'The role was sucessfully assigned to this user'\n}\n\nconst PaginatedTable = props => {\n  const [visable, setVisable] = useState(props.value)\n  const [page, setPage] = useState(0)\n  const [rowsPerPage, setRowsPerPage] = useState(5)\n\n  useEffect(() => {\n    setVisable(props.value)\n  }, [props.value])\n\n  const classes = useStyles()\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage)\n  }\n\n  const handleChangeRowsPerPage = event => {\n    setRowsPerPage(parseInt(event.target.value, 10))\n    setPage(0)\n  }\n\n  return (\n    <TableContainer component={Paper}>\n      <Table aria-label=\"simple table\">\n        <TableHead>\n          <TableRow>\n            <TableCell>Email</TableCell>\n            {props.removableEntries ? (\n              <TableCell align=\"right\">Actions</TableCell>\n            ) : null}\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {visable.length === 0 ? (\n            <TableRow>\n              <TableCell colspan={props.removableEntries ? 2 : 1}>\n                No Users to display\n              </TableCell>\n            </TableRow>\n          ) : (\n            (rowsPerPage > 0\n              ? visable.slice(\n                  page * rowsPerPage,\n                  page * rowsPerPage + rowsPerPage\n                )\n              : visable\n            ).map(user => (\n              <TableRow key={user.id}>\n                <Tooltip\n                  title={\n                    user?.status ? userTooltipTitles[user.status] : user.email\n                  }>\n                  <TableCell\n                    className={user?.status ? classes[user.status] : ''}>\n                    {user.email}\n                  </TableCell>\n                </Tooltip>\n                {props.removableEntries ? (\n                  <TableCell align=\"right\">\n                    <Button\n                      variant=\"outlined\"\n                      color=\"secondary\"\n                      startIcon={<DeleteIcon />}\n                      onClick={() => props.removeEntry(user.email)}>\n                      Remove\n                    </Button>\n                  </TableCell>\n                ) : null}\n              </TableRow>\n            ))\n          )}\n        </TableBody>\n        <TableFooter>\n          <TableRow>\n            <TablePagination\n              rowsPerPageOptions={[5, 10, 25, { label: 'All', value: -1 }]}\n              colSpan={3}\n              count={visable.length}\n              rowsPerPage={rowsPerPage}\n              page={page}\n              SelectProps={{\n                inputProps: { 'aria-label': 'rows per page' },\n                native: true\n              }}\n              onChangePage={handleChangePage}\n              onChangeRowsPerPage={handleChangeRowsPerPage}\n              ActionsComponent={TablePaginationActions}\n            />\n          </TableRow>\n        </TableFooter>\n      </Table>\n    </TableContainer>\n  )\n}\n\nPaginatedTable.propTypes = {\n  value: PropTypes.array.isRequired,\n  removableEntries: PropTypes.bool,\n  removeEntry: PropTypes.func\n}\n\nexport default PaginatedTable\n","import React from 'react'\nimport { useHistory } from 'react-router-dom'\nimport PropTypes from 'prop-types'\n\nimport { makeStyles } from '@material-ui/core/styles'\nimport Button from '@material-ui/core/Button'\nimport IconButton from '@material-ui/core/IconButton'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos'\n\nconst useStyles = makeStyles(theme => ({\n  button: {\n    margin: theme.spacing(1)\n  }\n}))\n\nconst BackButton = props => {\n  const classes = useStyles()\n  const history = useHistory()\n  return props.dense ? (\n    <IconButton\n      className={classes.button}\n      onClick={() => {\n        history.goBack()\n      }}\n      {...props}>\n      <ArrowBackIosIcon />\n    </IconButton>\n  ) : (\n    <Button\n      variant=\"contained\"\n      color=\"primary\"\n      className={classes.button}\n      startIcon={<ArrowBackIcon />}\n      onClick={() => history.goBack()}\n      {...props}>\n      Go Back\n    </Button>\n  )\n}\n\nBackButton.defaultProps = {\n  dense: false\n}\n\nBackButton.propTypes = {\n  dense: PropTypes.bool\n}\n\nexport default BackButton\n","import React, { useEffect } from 'react'\nimport PropTypes from 'prop-types'\n\nimport Alert from '@material-ui/lab/Alert'\nimport { Collapse, IconButton } from '@material-ui/core'\nimport CloseIcon from '@material-ui/icons/Close'\n\nconst CollapsableAlert = props => {\n  // useEffect(() => {\n  //   console.log('Open changed')\n  //   setTimeout(() => {\n  //     props.setOpen(false)\n  //     clearTimeout()\n  //   }, props.interval || 2000)\n  // }, [props.open])\n\n  return (\n    <Collapse in={props.open}>\n      <Alert\n        severity={props.severity}\n        action={\n          <IconButton\n            aria-label=\"close\"\n            color=\"inherit\"\n            size=\"small\"\n            onClick={() => {\n              props.setOpen(false)\n            }}>\n            <CloseIcon fontSize=\"inherit\" />\n          </IconButton>\n        }>\n        {props.message}\n      </Alert>\n    </Collapse>\n  )\n}\n\nCollapsableAlert.defaultProps = {\n  open: false,\n  setOpen: () => {},\n  message: 'No Message Supplied',\n  severity: 'error'\n}\n\nCollapsableAlert.propTypes = {\n  open: PropTypes.bool.isRequired,\n  setOpen: PropTypes.func.isRequired,\n  message: PropTypes.string.isRequired,\n  severity: PropTypes.string.isRequired,\n  interval: PropTypes.number\n}\n\nexport default CollapsableAlert\n","import React, { useState } from 'react'\nimport api from '../../../utils/api.axios'\n\nimport { Typography, Container, Divider } from '@material-ui/core'\n\nimport PrimaryButton from '../../PrimaryButton'\nimport UploadButton from './UploadButton'\nimport CSVUploader from '../../CSVUploader'\nimport UserEmailInputField from './UserEmailInputField'\nimport PaginatedTable from '../../PaginatedTable'\nimport BackButton from '../../Buttons/BackButton'\n\nimport CollapsableAlert from '../../CollapsableAlert'\n\nconst StudentAssignment = props => {\n  const [currentEmail, setCurrentEmail] = useState('')\n  const [students, setStudents] = useState([])\n  const [includeEmailPrefix, setIncludeEmailPrefix] = useState(true)\n  const [alert, setAlert] = useState({})\n  const [alertOpen, setAlertOpen] = useState(false)\n\n  const onChange = e => {\n    setCurrentEmail(e.target.value)\n  }\n\n  const onAdd = e => {\n    if (currentEmail.length === 0) {\n      setAlert({ message: 'Cannot add empty email!', severity: 'warning' })\n      setAlertOpen(true)\n      return\n    }\n\n    if (students.filter(student => student.email === currentEmail).length > 0) {\n      setAlert({ message: 'Cannot add duplicate email!', severity: 'warning' })\n      setAlertOpen(true)\n      return\n    }\n\n    // Only apply a email prefix if the checkbox is checked and there is no existing prefix already\n    let prefix =\n      currentEmail.indexOf('@') === -1 && includeEmailPrefix\n        ? '@studentmail.ul.ie'\n        : ''\n    let email = currentEmail.trim() + prefix\n\n    let re = /\\S+@\\S+\\.\\S+/\n    if (!re.test(email)) {\n      setAlert({ message: 'Cannot add invalid email!', severity: 'warning' })\n      setAlertOpen(true)\n      return\n    }\n\n    let studentsList = [...students]\n    studentsList.push({ email: email })\n    setCurrentEmail('')\n    setStudents(studentsList)\n  }\n\n  const onAddBulk = bulkStudents => {\n    let studentsList = [...students]\n    console.log('studentsList', studentsList)\n    console.log('bulkStudents', bulkStudents)\n    for (let student of bulkStudents) {\n      // Skip any empty rows or strings\n      if (!student || student.length === 0) {\n        console.log('Skipping', student)\n        return\n      }\n      studentsList.push({\n        id: studentsList.length,\n        email: student\n      })\n    }\n    setStudents(studentsList)\n  }\n\n  const onUpload = async e => {\n    if (students.length === 0) {\n      return console.log('Please enter some student emails before uploading')\n    }\n\n    let body = {\n      students: students\n    }\n\n    console.log('Uploading: ', body)\n\n    api\n      .post('/student/assign', body)\n      .then(res => {\n        console.log(res.data)\n        if (res.data.students.length > 0) {\n          let studentsMap = [...students]\n          let emailsMap = students.map(student => student.email)\n\n          for (let student of res.data.students) {\n            let index = emailsMap.indexOf(student.email)\n\n            if (index < 0) {\n              // Couldn't find student email address returned from api\n              continue\n            }\n\n            studentsMap[index].status = student.status\n          }\n\n          let remainingStudents = studentsMap.filter(\n            student =>\n              !['assigned', 'exists', undefined].includes(student?.status)\n          )\n          console.log(remainingStudents)\n          if (remainingStudents.length > 0) {\n            setAlert({\n              message:\n                'Could not add the following student emails (Hover email for more details)',\n              severity: 'error'\n            })\n          } else {\n            setAlert({\n              message: 'All students were sucessfully added',\n              severity: 'success'\n            })\n          }\n          setAlertOpen(true)\n          return setStudents(remainingStudents)\n        }\n        setStudents([])\n        setAlert({\n          message: 'All students were sucessfully added',\n          severity: 'success'\n        })\n\n        setAlertOpen(true)\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }\n\n  const onChangeEmailPrefix = e => {\n    setIncludeEmailPrefix(e.target.checked)\n  }\n\n  const handleRemove = studentEmail => {\n    let filteredStudents = students.filter(s => s.email !== studentEmail)\n    setStudents(filteredStudents)\n  }\n\n  const endAdornment = includeEmailPrefix ? (\n    <span style={{ fontSize: '10px', color: 'gray', marginRight: 10 }}>\n      @studentmail.ul.ie\n    </span>\n  ) : (\n    ''\n  )\n\n  return (\n    <Container maxWidth=\"lg\">\n      <BackButton />\n      <Typography variant=\"h6\">Upload CSV file</Typography>\n      <CSVUploader onAdd={onAddBulk} />\n\n      <br />\n      <Divider />\n      <br />\n\n      <Typography variant=\"h6\">Add Individual Student</Typography>\n      <UserEmailInputField\n        email={currentEmail}\n        endAdornment={endAdornment}\n        onChange={onChange}\n        includeEmailPrefix={includeEmailPrefix}\n        onChangeEmailPrefix={onChangeEmailPrefix}\n        onAdd={onAdd}\n      />\n\n      <br />\n\n      <CollapsableAlert\n        open={alertOpen}\n        setOpen={setAlertOpen}\n        message={alert.message}\n        severity={alert.severity}\n      />\n\n      <br />\n\n      <PaginatedTable\n        value={students}\n        removableEntries\n        removeEntry={handleRemove}\n      />\n\n      <UploadButton disabled={!students.length} onUpload={onUpload} />\n      <PrimaryButton\n        type=\"text\"\n        color=\"secondary\"\n        onClick={() => {\n          setStudents([])\n          setAlertOpen(false)\n        }}>\n        Clear Student List\n      </PrimaryButton>\n    </Container>\n  )\n}\n\nexport default StudentAssignment\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { IconButton } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft'\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexShrink: 0,\n    marginLeft: theme.spacing(2.5)\n  }\n}))\n\nfunction TablePaginationActions(props) {\n  const classes = useStyles()\n  const { count, page, rowsPerPage, onChangePage } = props\n\n  const handleBackButtonClick = event => {\n    onChangePage(event, page - 1)\n  }\n\n  const handleNextButtonClick = event => {\n    onChangePage(event, page + 1)\n  }\n\n  return (\n    <div className={classes.root}>\n      <IconButton\n        onClick={handleBackButtonClick}\n        disabled={page === 0}\n        aria-label=\"previous page\">\n        <KeyboardArrowLeft />\n      </IconButton>\n      <IconButton\n        onClick={handleNextButtonClick}\n        disabled={page >= Math.ceil(count / rowsPerPage) - 1}\n        aria-label=\"next page\">\n        <KeyboardArrowRight />\n      </IconButton>\n    </div>\n  )\n}\n\nTablePaginationActions.propTypes = {\n  count: PropTypes.number.isRequired,\n  onChangePage: PropTypes.func.isRequired,\n  page: PropTypes.number.isRequired,\n  rowsPerPage: PropTypes.number.isRequired\n}\n\nexport default TablePaginationActions\n","import React, { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Container,\n  TableContainer,\n  Paper,\n  Table,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableBody,\n  TableFooter,\n  TablePagination,\n  Checkbox\n} from '@material-ui/core'\nimport { Edit, Delete } from '@material-ui/icons'\n\nimport api from '../../utils/api.axios'\nimport Input from '../Input'\nimport PrimaryButton from '../PrimaryButton'\nimport CollapsableAlert from '../CollapsableAlert'\n\nimport TablePaginationActions from '../Table/TablePaginationActions'\n\nconst StudentManagement = props => {\n  const [students, setStudents] = useState([])\n  const [visableStudents, setVisableStudents] = useState([])\n  const [selected, setSelected] = useState([])\n  const [page, setPage] = useState(0)\n  const [rowsPerPage, setRowsPerPage] = useState(5)\n  const [loading, setLoading] = useState(true)\n  const [alert, setAlert] = useState({})\n  const [alertOpen, setAlertOpen] = useState(false)\n\n  useEffect(() => {\n    refreshStudentList()\n  }, [])\n\n  const refreshStudentList = () => {\n    // Get students from DB\n    api\n      .get('/student')\n      .then(res => {\n        console.log(res)\n        setStudents(res.data.students)\n        setVisableStudents(res.data.students)\n      })\n      .catch(err => {\n        switch (err) {\n          case 'error_retrieving_students':\n            setAlert({\n              message: 'Could not retrieve students from database',\n              severity: 'warning'\n            })\n            break\n          default:\n            setAlert({\n              message: 'An error occurred, please try again',\n              severity: 'error'\n            })\n        }\n        setAlertOpen(true)\n      })\n      .finally(() => {\n        setLoading(false)\n      })\n  }\n\n  const handleSelected = studentId => {\n    let studentList = [...selected]\n\n    if (studentList.includes(studentId)) {\n      studentList.splice(studentList.indexOf(studentId), 1)\n    } else {\n      studentList.push(studentId)\n    }\n\n    setSelected(studentList)\n  }\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage)\n  }\n\n  const handleChangeRowsPerPage = event => {\n    setRowsPerPage(parseInt(event.target.value, 10))\n    setPage(0)\n  }\n\n  const handleSearch = e => {\n    if (e.target.value === '') {\n      return setVisableStudents(students)\n    }\n    let searched = students.filter(\n      student => !student.email.indexOf(e.target.value.trim())\n    )\n    setVisableStudents(searched)\n  }\n\n  const handleRemoveSingle = id => {\n    console.log('removing student w/ id', id)\n\n    api\n      .post('/student/delete', { studentId: id })\n      .then(res => {\n        console.log(res)\n        setAlert({\n          message: 'Student sucessfully removed',\n          severity: 'success'\n        })\n        setAlertOpen(true)\n        refreshStudentList()\n      })\n      .catch(err => {\n        console.log(err)\n        switch (err) {\n          case 'error_retrieving_student':\n            setAlert({\n              message:\n                'An error occurred while retrieving the student. Please try again',\n              severity: 'warning'\n            })\n            break\n          case 'student_not_found':\n            setAlert({\n              message: 'Could not find the requested student',\n              severity: 'warning'\n            })\n            refreshStudentList()\n            break\n          default:\n            setAlert({\n              message: 'An error occurred, please try again',\n              severity: 'error'\n            })\n        }\n\n        setAlertOpen(true)\n      })\n  }\n\n  const handleRemove = () => {\n    console.log('Removing Students')\n    console.log(selected)\n  }\n\n  if (loading) {\n    return <p>Loading...</p>\n  }\n\n  return (\n    <Container maxwidth=\"md\">\n      <Link to=\"/student/assign\">\n        <PrimaryButton>Assign Students</PrimaryButton>\n      </Link>\n      <Input label=\"Search\" onChange={handleSearch} />\n      <TableContainer component={Paper}>\n        <Table aria-label=\"simple table\">\n          <TableHead>\n            <TableRow>\n              <TableCell>Selected ({selected.length})</TableCell>\n              <TableCell align=\"right\">Email</TableCell>\n              <TableCell align=\"right\">Actions</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {visableStudents.length === 0 ? (\n              <TableRow>\n                <TableCell colSpan={3} align=\"center\">\n                  No Students to show\n                </TableCell>\n              </TableRow>\n            ) : (\n              (rowsPerPage > 0\n                ? visableStudents.slice(\n                    page * rowsPerPage,\n                    page * rowsPerPage + rowsPerPage\n                  )\n                : visableStudents\n              ).map(student => (\n                <TableRow key={student.id}>\n                  <TableCell component=\"th\" scope=\"row\">\n                    <Checkbox\n                      checked={selected.includes(student.id)}\n                      onClick={() => handleSelected(student.id)}\n                    />\n                  </TableCell>\n                  <TableCell align=\"right\">{student.email}</TableCell>\n                  <TableCell align=\"right\">\n                    <PrimaryButton\n                      style={{ width: '25%', margin: 0 }}\n                      startIcon={<Edit />}>\n                      View\n                    </PrimaryButton>\n                    <PrimaryButton\n                      onClick={() => handleRemoveSingle(student._id)}\n                      style={{ width: '25%', margin: '0 0 0 5px' }}\n                      color=\"secondary\"\n                      startIcon={<Delete />}>\n                      Delete\n                    </PrimaryButton>\n                  </TableCell>\n                </TableRow>\n              ))\n            )}\n          </TableBody>\n          <TableFooter>\n            <TableRow>\n              <TablePagination\n                rowsPerPageOptions={[5, 10, 25, { label: 'All', value: -1 }]}\n                colSpan={3}\n                count={visableStudents.length}\n                rowsPerPage={rowsPerPage}\n                page={page}\n                SelectProps={{\n                  inputProps: { 'aria-label': 'rows per page' },\n                  native: true\n                }}\n                onChangePage={handleChangePage}\n                onChangeRowsPerPage={handleChangeRowsPerPage}\n                ActionsComponent={TablePaginationActions}\n              />\n            </TableRow>\n          </TableFooter>\n        </Table>\n      </TableContainer>\n      {console.log(alertOpen)}\n      <CollapsableAlert\n        open={alertOpen}\n        setOpen={setAlertOpen}\n        message={alert.message}\n        severity={alert.severity}\n      />\n      {/* <PrimaryButton disabled={selected.length === 0} onClick={handleRemove}>\n        Remove Selected\n      </PrimaryButton> */}\n    </Container>\n  )\n}\n\nexport default StudentManagement\n","import React, { useState } from 'react'\nimport api from '../../../utils/api.axios'\n\nimport { Typography, Container, Divider } from '@material-ui/core'\n\nimport PrimaryButton from '../../PrimaryButton'\nimport UploadButton from './UploadButton'\nimport CSVUploader from '../../CSVUploader'\nimport UserEmailInputField from './UserEmailInputField'\nimport PaginatedTable from '../../PaginatedTable'\nimport BackButton from '../../Buttons/BackButton'\n\nimport CollapsableAlert from '../../CollapsableAlert'\n\nconst SupervisorAssignment = props => {\n  const [currentEmail, setCurrentEmail] = useState('')\n  const [supervisors, setSupervisors] = useState([])\n  const [includeEmailPrefix, setIncludeEmailPrefix] = useState(true)\n  const [alert, setAlert] = useState({})\n  const [alertOpen, setAlertOpen] = useState(false)\n\n  const onChange = e => {\n    setCurrentEmail(e.target.value)\n  }\n\n  const onAdd = e => {\n    if (currentEmail.length === 0) {\n      setAlert({ message: 'Cannot add empty email!', severity: 'warning' })\n      setAlertOpen(true)\n      return\n    }\n\n    if (\n      supervisors.filter(supervisor => supervisor.email === currentEmail)\n        .length > 0\n    ) {\n      setAlert({ message: 'Cannot add duplicate email!', severity: 'warning' })\n      setAlertOpen(true)\n      return\n    }\n\n    // Only apply a email prefix if the checkbox is checked and there is no existing prefix already\n    let prefix =\n      currentEmail.indexOf('@') === -1 && includeEmailPrefix ? '@ul.ie' : ''\n    let email = currentEmail.trim() + prefix\n\n    let re = /\\S+@\\S+\\.\\S+/\n    if (!re.test(email)) {\n      setAlert({ message: 'Cannot add invalid email!', severity: 'error' })\n      setAlertOpen(true)\n      return\n    }\n\n    let supervisorsList = [...supervisors]\n    supervisorsList.push({ email: email })\n    setCurrentEmail('')\n    setSupervisors(supervisorsList)\n  }\n\n  const onAddBulk = bulksupervisors => {\n    let supervisorsList = [...supervisors]\n    for (let supervisor of bulksupervisors) {\n      // Skip any empty rows or strings\n      if (!supervisor || supervisor.length === 0) {\n        return\n      }\n      supervisorsList.push({\n        id: supervisorsList.length,\n        email: supervisor\n      })\n    }\n    setSupervisors(supervisorsList)\n  }\n\n  const onUpload = async e => {\n    if (supervisors.length === 0) {\n      return console.log('Please enter some supervisor emails before uploading')\n    }\n\n    let body = {\n      supervisors: supervisors\n    }\n\n    console.log('Uploading: ', body)\n\n    api\n      .post('/supervisor/assign', body)\n      .then(res => {\n        console.log(res.data.supervisors)\n        if (res.data.supervisors.length > 0) {\n          let supervisorsMap = [...supervisors]\n          let emailsMap = supervisors.map(supervisor => supervisor.email)\n\n          for (let supervisor of res.data.supervisors) {\n            let index = emailsMap.indexOf(supervisor.email)\n\n            if (index < 0) {\n              // Couldn't find supervisor email address returned from api\n              continue\n            }\n\n            supervisorsMap[index].status = supervisor.status\n          }\n\n          let remainingsupervisors = supervisorsMap.filter(\n            supervisor =>\n              !['assigned', 'exists', undefined].includes(supervisor?.status)\n          )\n          console.log(remainingsupervisors)\n          if (remainingsupervisors.length > 0) {\n            setAlert({\n              message: 'Could not add the following supervisor emails',\n              severity: 'error'\n            })\n            setAlertOpen(true)\n          } else {\n            setAlert({\n              message: 'Supervisors were added successfully',\n              severity: 'success'\n            })\n            setAlertOpen(true)\n          }\n          return setSupervisors(remainingsupervisors)\n        }\n        setSupervisors([])\n\n        setAlert({\n          message: 'All supervisors were sucessfully added',\n          severity: 'success'\n        })\n\n        setAlertOpen(true)\n      })\n      .catch(err => {\n        console.log(err)\n        setAlert({\n          message: 'An error occurred, please try again',\n          severity: 'error'\n        })\n        setAlertOpen(true)\n      })\n  }\n\n  const onChangeEmailPrefix = e => {\n    setIncludeEmailPrefix(e.target.checked)\n  }\n\n  const handleRemove = studentEmail => {\n    let filteredSupervisors = supervisors.filter(s => s.email !== studentEmail)\n    setSupervisors(filteredSupervisors)\n  }\n\n  const endAdornment = includeEmailPrefix ? (\n    <span style={{ fontSize: '10px', color: 'gray', marginRight: 10 }}>\n      @ul.ie\n    </span>\n  ) : (\n    ''\n  )\n\n  return (\n    <Container maxWidth=\"lg\">\n      <BackButton />\n      <Typography variant=\"h6\">Add Supervisors (CSV File)</Typography>\n      <CSVUploader onAdd={onAddBulk} />\n\n      <br />\n      <Divider />\n      <br />\n\n      <Typography variant=\"h6\">Add Supervisor by Email</Typography>\n      <UserEmailInputField\n        email={currentEmail}\n        endAdornment={endAdornment}\n        onChange={onChange}\n        includeEmailPrefix={includeEmailPrefix}\n        onChangeEmailPrefix={onChangeEmailPrefix}\n        onAdd={onAdd}\n      />\n\n      <CollapsableAlert\n        open={alertOpen}\n        setOpen={setAlertOpen}\n        message={alert.message}\n        severity={alert.severity}\n      />\n\n      <br />\n\n      <PaginatedTable\n        value={supervisors}\n        removableEntries\n        removeEntry={handleRemove}\n      />\n\n      <UploadButton disabled={!supervisors.length} onUpload={onUpload} />\n      <PrimaryButton\n        type=\"text\"\n        color=\"secondary\"\n        onClick={() => {\n          setSupervisors([])\n        }}>\n        Clear Supervisor List\n      </PrimaryButton>\n    </Container>\n  )\n}\n\nexport default SupervisorAssignment\n","import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Container,\n  TableContainer,\n  Paper,\n  Table,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableBody,\n  TableFooter,\n  TablePagination,\n  Checkbox,\n  IconButton\n} from '@material-ui/core'\nimport { Edit, Delete } from '@material-ui/icons'\n\nimport api from '../../utils/api.axios'\n\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft'\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight'\n\nimport { makeStyles } from '@material-ui/core/styles'\nimport Input from '../Input'\nimport PrimaryButton from '../PrimaryButton'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexShrink: 0,\n    marginLeft: theme.spacing(2.5)\n  }\n}))\n\nfunction TablePaginationActions(props) {\n  const classes = useStyles()\n  const { count, page, rowsPerPage, onChangePage } = props\n\n  const handleBackButtonClick = event => {\n    onChangePage(event, page - 1)\n  }\n\n  const handleNextButtonClick = event => {\n    onChangePage(event, page + 1)\n  }\n\n  return (\n    <div className={classes.root}>\n      <IconButton\n        onClick={handleBackButtonClick}\n        disabled={page === 0}\n        aria-label=\"previous page\">\n        <KeyboardArrowLeft />\n      </IconButton>\n      <IconButton\n        onClick={handleNextButtonClick}\n        disabled={page >= Math.ceil(count / rowsPerPage) - 1}\n        aria-label=\"next page\">\n        <KeyboardArrowRight />\n      </IconButton>\n    </div>\n  )\n}\n\nTablePaginationActions.propTypes = {\n  count: PropTypes.number.isRequired,\n  onChangePage: PropTypes.func.isRequired,\n  page: PropTypes.number.isRequired,\n  rowsPerPage: PropTypes.number.isRequired\n}\n\nconst SupervisorManagement = props => {\n  const [supervisors, setSupervisors] = useState([])\n  const [visableSupervisors, setVisableSupervisors] = useState([])\n  const [selected, setSelected] = useState([])\n  const [page, setPage] = useState(0)\n  const [rowsPerPage, setRowsPerPage] = useState(5)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    refreshSupervisorList()\n  }, [])\n\n  const refreshSupervisorList = () => {\n    // Get supervisors from DB\n    api\n      .get('/supervisor')\n      .then(res => {\n        console.log(res)\n        setSupervisors(res.data.supervisors)\n        setVisableSupervisors(res.data.supervisors)\n      })\n      .catch(err => {\n        console.log(err)\n      })\n      .finally(() => {\n        setLoading(false)\n      })\n  }\n\n  const handleSelected = supervisorId => {\n    let supervisorList = [...selected]\n\n    if (supervisorList.includes(supervisorId)) {\n      supervisorList.splice(supervisorList.indexOf(supervisorId), 1)\n    } else {\n      supervisorList.push(supervisorId)\n    }\n\n    setSelected(supervisorList)\n  }\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage)\n  }\n\n  const handleChangeRowsPerPage = event => {\n    setRowsPerPage(parseInt(event.target.value, 10))\n    setPage(0)\n  }\n\n  const handleSearch = e => {\n    if (e.target.value === '') {\n      return setVisableSupervisors(supervisors)\n    }\n    let searched = supervisors.filter(\n      supervisor => !supervisor.email.indexOf(e.target.value.trim())\n    )\n    setVisableSupervisors(searched)\n  }\n\n  const handleRemoveSingle = id => {\n    console.log('removing supervisor w/ id', id)\n\n    api\n      .post('/supervisor/delete', { supervisorId: id })\n      .then(res => {\n        console.log(res)\n        refreshSupervisorList()\n      })\n      .catch(err => {\n        // TODO: Inform user of error\n        console.log(err)\n      })\n  }\n\n  const handleRemove = () => {\n    console.log('Removing Supervisors')\n    console.log(selected)\n  }\n\n  if (loading) {\n    return <p>Loading...</p>\n  }\n\n  return (\n    <Container maxwidth=\"md\">\n      <Link to=\"/supervisor/assign\">\n        <PrimaryButton>Go to Assign Supervisors Page</PrimaryButton>\n      </Link>\n      <Input label=\"Search\" onChange={handleSearch} />\n\n      <TableContainer component={Paper}>\n        <Table aria-label=\"simple table\">\n          <TableHead>\n            <TableRow>\n              <TableCell>Selected ({selected.length})</TableCell>\n              <TableCell align=\"right\">Email</TableCell>\n              <TableCell align=\"right\">Actions</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {visableSupervisors.length === 0 ? (\n              <TableRow>\n                <TableCell colSpan={3} align=\"center\">\n                  No Supervisors to show\n                </TableCell>\n              </TableRow>\n            ) : (\n              (rowsPerPage > 0\n                ? visableSupervisors.slice(\n                    page * rowsPerPage,\n                    page * rowsPerPage + rowsPerPage\n                  )\n                : visableSupervisors\n              ).map(supervisor => (\n                <TableRow key={supervisor.id}>\n                  <TableCell component=\"th\" scope=\"row\">\n                    <Checkbox\n                      checked={selected.includes(supervisor.id)}\n                      onClick={() => handleSelected(supervisor.id)}\n                    />\n                  </TableCell>\n                  <TableCell align=\"right\">{supervisor.email}</TableCell>\n                  <TableCell align=\"right\">\n                    {/* TODO: Add loading etc when removing supervisor */}\n                    <PrimaryButton\n                      onClick={() => handleRemoveSingle(supervisor._id)}\n                      style={{ width: '50%', margin: '0 0 0 5px' }}\n                      color=\"secondary\"\n                      startIcon={<Delete />}>\n                      Delete\n                    </PrimaryButton>\n                  </TableCell>\n                </TableRow>\n              ))\n            )}\n          </TableBody>\n          <TableFooter>\n            <TableRow>\n              <TablePagination\n                rowsPerPageOptions={[5, 10, 25, { label: 'All', value: -1 }]}\n                colSpan={3}\n                count={visableSupervisors.length}\n                rowsPerPage={rowsPerPage}\n                page={page}\n                SelectProps={{\n                  inputProps: { 'aria-label': 'rows per page' },\n                  native: true\n                }}\n                onChangePage={handleChangePage}\n                onChangeRowsPerPage={handleChangeRowsPerPage}\n                ActionsComponent={TablePaginationActions}\n              />\n            </TableRow>\n          </TableFooter>\n        </Table>\n      </TableContainer>\n\n      <PrimaryButton disabled={selected.length === 0} onClick={handleRemove}>\n        Remove Selected\n      </PrimaryButton>\n    </Container>\n  )\n}\n\nexport default SupervisorManagement\n","import * as yup from 'yup'\n\nconst defaultValues = {\n  coordinator: ''\n}\n\nconst formSchema = yup.object().shape({\n  coordinator: yup\n    .string()\n    .email('Must be a valid email')\n    .required('Email address must not be blank')\n})\n\nexport { formSchema, defaultValues }\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport {\n  Paper,\n  Table,\n  TableContainer,\n  TableHead,\n  TableBody,\n  TableRow,\n  TableCell,\n  Button\n} from '@material-ui/core'\nimport DeleteIcon from '@material-ui/icons/Delete'\n\nimport CollapsableAlert from '../../CollapsableAlert'\n\nconst ListCoordinatorTable = props => {\n  return (\n    <>\n      <TableContainer component={Paper}>\n        <Table aria-label=\"simple table\">\n          <TableHead>\n            <TableRow>\n              <TableCell>Name</TableCell>\n              <TableCell align=\"right\">Email</TableCell>\n              <TableCell align=\"right\">Actions</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {props.refreshing ? (\n              <TableRow>\n                <TableCell component=\"th\" scope=\"row\" colSpan={3}>\n                  Refreshing Coordinator List ...\n                </TableCell>\n              </TableRow>\n            ) : props.value.length === 0 ? (\n              <TableRow>\n                <TableCell component=\"th\" scope=\"row\" colSpan={3}>\n                  No Coordinators Found\n                </TableCell>\n              </TableRow>\n            ) : (\n              props.value.map(coordinator => (\n                <TableRow key={coordinator.id}>\n                  <TableCell component=\"th\" scope=\"row\">\n                    {coordinator.displayName}\n                  </TableCell>\n                  <TableCell align=\"right\">{coordinator.email}</TableCell>\n                  <TableCell align=\"right\">\n                    <Button\n                      variant=\"outlined\"\n                      color=\"secondary\"\n                      startIcon={<DeleteIcon />}\n                      onClick={() => props.handleRemove(coordinator)}>\n                      Remove\n                    </Button>\n                  </TableCell>\n                </TableRow>\n              ))\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n      <CollapsableAlert\n        open={props.open}\n        setOpen={props.setOpen}\n        message={props.alert.message}\n        severity={props.alert.severity}\n      />\n    </>\n  )\n}\n\nListCoordinatorTable.propTypes = {\n  refreshing: PropTypes.bool.isRequired,\n  value: PropTypes.array.isRequired,\n  handleRemove: PropTypes.func.isRequired,\n  open: PropTypes.bool.isRequired,\n  setOpen: PropTypes.func.isRequired,\n  alert: PropTypes.object.isRequired\n}\n\nexport default ListCoordinatorTable\n","import React, { useState, useEffect } from 'react'\nimport { useForm } from 'react-hook-form'\nimport { yupResolver } from '@hookform/resolvers/yup'\nimport {\n  formSchema,\n  defaultValues\n} from '../../../utils/yupSchemas/ManageCoordinator.js'\n\nimport {\n  Container,\n  Button,\n  Typography,\n  Dialog,\n  DialogContent,\n  DialogTitle,\n  DialogContentText,\n  DialogActions,\n  Slide\n} from '@material-ui/core'\nimport { ArrowForward, Delete } from '@material-ui/icons'\n\nimport api from '../../../utils/api.axios'\n\nimport ListCoordinatorTable from './ListCoordinatorTable'\nimport PrimaryButton from '../../PrimaryButton'\nimport Input from '../../Input'\nimport CollapsableAlert from '../../CollapsableAlert'\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />\n})\n\nexport default function ManageCoordinator(props) {\n  const [selectedCoordinator, setSelectedCoordinator] = useState()\n  const [assignedCoordinators, setAssignedCoordinators] = useState([])\n  const [dialogOpen, setDialogOpen] = useState(false)\n  const [refreshing, setRefreshing] = useState(true)\n  const [alert, setAlert] = useState({})\n  const [alertOpen, setAlertOpen] = useState(false)\n  const [tableAlert, setTableAlert] = useState({})\n  const [tableAlertOpen, setTableAlertOpen] = useState(false)\n\n  const { register, handleSubmit, errors } = useForm({\n    resolver: yupResolver(formSchema),\n    reValidateMode: 'onChange',\n    defaultValues\n  })\n\n  useEffect(() => {\n    refreshAssignedCoordinators()\n  }, [])\n\n  const handleAssignCoordinator = data => {\n    api\n      .post('/coordinator/assign', data)\n      .then(res => {\n        switch (res.data?.coordinator[0]?.status) {\n          case 'assigned':\n            console.log('Sucessful Coordinator assign')\n            // TODO: Find out how to assign this role automatically\n            setAlert({\n              message: 'Coordinator suvessfully assigned',\n              severity: 'success'\n            })\n            refreshAssignedCoordinators()\n            break\n          case 'exists':\n            setAlert({\n              message: 'User is already a Coordinator',\n              severity: 'warning'\n            })\n            break\n          case 'not_found':\n            setAlert({\n              message:\n                'Email address supplied could not be linked to an active user',\n              severity: 'error'\n            })\n            break\n          default:\n            setAlert({\n              message: 'An error occurred, please try again',\n              severity: 'error'\n            })\n        }\n        console.log(alert)\n        setAlertOpen(true)\n      })\n      .catch(err => {\n        setAlert({\n          message: 'An error occurred, please try again',\n          severity: 'warning'\n        })\n        setAlertOpen(true)\n      })\n  }\n\n  const refreshAssignedCoordinators = () => {\n    setRefreshing(true)\n\n    api\n      .get('/coordinator')\n      .then(res => {\n        if (!res.data?.coordinators) {\n          return setAssignedCoordinators([])\n        }\n\n        setAssignedCoordinators(res.data.coordinators)\n      })\n      .catch(err => {\n        console.log(err)\n        setTableAlert({\n          message: err.message,\n          severity: 'error'\n        })\n        setTableAlertOpen(true)\n        setRefreshing(false)\n      })\n      .finally(() => {\n        setRefreshing(false)\n      })\n  }\n\n  const handleRemoveClick = coordinator => {\n    setSelectedCoordinator(coordinator)\n    setDialogOpen(true)\n  }\n\n  const handleRemove = deleteCoordinator => {\n    if (deleteCoordinator) {\n      api\n        .post('/coordinator/remove', { coordinatorId: selectedCoordinator._id })\n        .then(resp => {\n          console.log(resp)\n          setTableAlert({\n            message: 'Coordinator sucessfully removed',\n            severity: 'success'\n          })\n          setTableAlertOpen(true)\n          refreshAssignedCoordinators()\n        })\n        .catch(err => {\n          switch (err) {\n            case 'error_while_retrieving_coordinator':\n              setTableAlert({\n                message:\n                  'An error occurred while retrieving the selected coordinator, please try again',\n                severity: 'warning'\n              })\n              break\n            case 'unable_to_remove':\n              // Could not delete user from database (please try again)\n              setTableAlert({\n                message: 'Could not remove coordinator, please try again',\n                severity: 'warning'\n              })\n              break\n            case 'coordinator_not_found':\n              setTableAlert({\n                message: 'Could not find selected coordinator',\n                severity: 'warning'\n              })\n              refreshAssignedCoordinators()\n              break\n            default:\n              console.log(err)\n              setTableAlert({\n                message: 'Could not remove coordinator',\n                severity: 'error'\n              })\n          }\n\n          setTableAlertOpen(true)\n        })\n      setDialogOpen(false)\n    } else {\n      setDialogOpen(false)\n    }\n  }\n\n  return (\n    <Container maxWidth=\"md\">\n      <Dialog\n        open={dialogOpen}\n        TransitionComponent={Transition}\n        aria-labelledby=\"alert-dialog-slide-title\"\n        aria-describedby=\"alert-dialog-slide-description\">\n        <DialogTitle id=\"alert-dialog-slide-title\">\n          Remove Coordinator?\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-slide-description\">\n            Are you sure you want to remove\n            <br />\n            <span style={{ fontWeight: 'bold' }}>\n              {selectedCoordinator?.displayName}\n            </span>\n            <br />\n            Coordinator role?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            variant=\"outlined\"\n            onClick={() => handleRemove(false)}\n            color=\"primary\">\n            No\n          </Button>\n          <Button\n            startIcon={<Delete />}\n            variant=\"contained\"\n            onClick={() => handleRemove(true)}\n            color=\"secondary\">\n            Yes\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Typography variant=\"h6\">Manage Coordinators</Typography>\n      <br />\n      <form onSubmit={handleSubmit(handleAssignCoordinator)}>\n        <Input\n          inputRef={register}\n          label=\"Coordinator Email\"\n          placeholder=\"e.g. John.Keane@ul.ie\"\n          variant=\"outlined\"\n          name=\"coordinator\"\n          style={{ margin: 0 }}\n          error={!!errors.coordinator}\n          helperText={errors?.coordinator?.message}\n        />\n        <PrimaryButton\n          variant=\"contained\"\n          color=\"primary\"\n          endIcon={<ArrowForward />}>\n          Assign New Coordinator\n        </PrimaryButton>\n        <CollapsableAlert\n          open={alertOpen}\n          setOpen={setAlertOpen}\n          message={alert.message}\n          severity={alert.severity}\n        />\n      </form>\n\n      <Typography variant=\"h6\">Existing Coordinators</Typography>\n      <br />\n\n      <ListCoordinatorTable\n        refreshing={refreshing}\n        value={assignedCoordinators}\n        open={tableAlertOpen}\n        setOpen={setTableAlertOpen}\n        handleRemove={handleRemoveClick}\n        alert={tableAlert}\n      />\n    </Container>\n  )\n}\n","import React, { useContext, useState } from 'react'\nimport { useMsal } from '@azure/msal-react'\nimport {\n  Avatar,\n  Button,\n  Box,\n  IconButton,\n  Menu,\n  MenuItem,\n  Toolbar\n} from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { useHistory, Link } from 'react-router-dom'\nimport { Can } from '../Auth/Can'\n\nimport { PhaseContext } from '../contexts/PhaseContext'\n\nimport HomeIcon from '@material-ui/icons/Home'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\n\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport SendIcon from '@material-ui/icons/Send'\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp'\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle'\n\nconst useStyles = makeStyles(theme => ({\n  navDisplayFlex: {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'center'\n  },\n  linkText: {\n    textDecoration: 'none',\n    textTransform: 'none',\n    color: 'white'\n  },\n  linkButton: {\n    margin: '0 5px'\n  }\n}))\n\nexport default function NavBar(props) {\n  const styles = useStyles()\n  const { currentPhase } = useContext(PhaseContext)\n\n  const history = useHistory()\n  const { instance } = useMsal()\n\n  const [anchorEl, setAnchorEl] = useState(null)\n\n  console.log(currentPhase)\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget)\n  }\n\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  return (\n    <Toolbar>\n      <div style={{ flexGrow: 1 }}>\n        <Link to=\"/\">\n          <IconButton edge=\"start\" aria-label=\"home\">\n            <HomeIcon fontSize=\"large\" style={{ color: 'white' }} />\n          </IconButton>\n        </Link>\n        {currentPhase.phase === 3 || currentPhase.phase === 4 ? (\n          <>\n            <Can I=\"read\" a=\"Topic\">\n              <Link to=\"/topics\" className={styles.linkButton}>\n                <Button className={styles.linkText}>View Topics List</Button>\n              </Link>\n            </Can>\n\n            <Can I=\"manage\" a=\"Proposal\">\n              <Link to=\"/proposals\" className={styles.linkButton}>\n                <Button className={styles.linkText}>Manage Proposals</Button>\n              </Link>\n            </Can>\n          </>\n        ) : null}\n\n        {/* Supervisor */}\n        {(currentPhase.phase === 2 ||\n          currentPhase.phase === 3 ||\n          currentPhase.phase === 4) && (\n          <Can I=\"manage\" a=\"Topic\">\n            <Link to=\"/topics/manage\" className={styles.linkButton}>\n              <Button className={styles.linkText}>Manage Topic List</Button>\n            </Link>\n          </Can>\n        )}\n\n        {/* Coordinator */}\n        <Can I=\"takeActionPhaseOne\" this={currentPhase}>\n          <Can I=\"manage\" a=\"Student\">\n            <Link to=\"/student/manage\" className={styles.linkButton}>\n              <Button className={styles.linkText}>Manage Students</Button>\n            </Link>\n          </Can>\n          <Can I=\"manage\" a=\"Supervisor\">\n            <Link to=\"/supervisor/manage\" className={styles.linkButton}>\n              <Button className={styles.linkText}>Manage Supervisors</Button>\n            </Link>\n          </Can>\n        </Can>\n\n        {/* Administrator / Coordinator */}\n        <Can I=\"takeActionPhaseOne\" this={currentPhase}>\n          <Can I=\"create\" a=\"Coordinator\">\n            <Link to=\"/coordinator\" className={styles.linkButton}>\n              <Button className={styles.linkText}>Manage Coordinators</Button>\n            </Link>\n          </Can>\n          <Can I=\"update\" a=\"Phase\">\n            <Link to=\"/phase/manage\" className={styles.linkButton}>\n              <Button className={styles.linkText}>Manage Phases</Button>\n            </Link>\n          </Can>\n        </Can>\n      </div>\n\n      {/* User Avatar */}\n      <Box edge=\"end\">\n        <Button\n          aria-label=\"delete\"\n          onClick={handleClick}\n          endIcon={<ExpandMoreIcon style={{ color: 'white' }} />}>\n          <Avatar style={{ color: 'white' }}>AB</Avatar>\n        </Button>\n\n        <Menu\n          anchorEl={anchorEl}\n          keepMounted\n          open={Boolean(anchorEl)}\n          onClose={handleClose}\n          getContentAnchorEl={null}\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'center'\n          }}\n          transformOrigin={{\n            vertical: 'top',\n            horizontal: 'center'\n          }}>\n          {/* <MenuItem\n            onClick={() => {\n              history.push('/settings')\n              setAnchorEl(null)\n            }}>\n            <ListItemIcon>\n              <AccountCircleIcon fontSize=\"small\" />\n            </ListItemIcon>\n            <ListItemText primary=\"My Account\" />\n          </MenuItem> */}\n          <MenuItem\n            onClick={() => {\n              instance.logout({ onRedirectNavigate: 'http://localhost:3000/' })\n              setAnchorEl(null)\n            }}>\n            <ListItemIcon>\n              <ExitToAppIcon fontSize=\"small\" />\n            </ListItemIcon>\n            <ListItemText primary=\"Logout\" />\n          </MenuItem>\n        </Menu>\n      </Box>\n    </Toolbar>\n  )\n}\n","import React from 'react'\nimport { AppBar } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport NavBar from './NavBar'\n\nconst useStyles = makeStyles(theme => ({\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1\n  }\n}))\n\nexport default function Header(props) {\n  const classes = useStyles()\n  return (\n    <AppBar position=\"fixed\" className={classes.appBar}>\n      <NavBar />\n    </AppBar>\n  )\n}\n","const proposalStatuses = {\n  draft: 'Draft',\n  submitted: 'Pending Supervisor Feedback',\n  under_review: 'Under Review',\n  pending_edits: 'Edits Required',\n  accepted: 'Accepted',\n  rejected: 'Rejected'\n}\nconst proposalStatusToHumanFriendlyString = status => proposalStatuses[status]\n\nexport { proposalStatuses, proposalStatusToHumanFriendlyString }\n","import * as yup from 'yup'\nimport { proposalStatuses } from '../proposal'\n\nconst defaultValues = {\n  title: '',\n  status: '',\n  description: '',\n  chooseMeMessage: '',\n  additionalNotes: '',\n  environment: '',\n  languages: '',\n  type: ''\n}\n\nconst basicSchemaObj = {\n  title: yup.string().required('Proposal must have a title'),\n  description: yup.string().required('Proposal must have a description'),\n  chooseMeMessage: yup.string(),\n  additionalNotes: yup.string(),\n  environment: yup.string(),\n  languages: yup.string()\n}\n\nconst formSchema = yup.object().shape({ ...basicSchemaObj })\n\nconst editFormSchema = yup.object().shape({\n  description: yup.string().required('Proposal must have a description'),\n  chooseMeMessage: yup.string(),\n  additionalNotes: yup.string(),\n  environment: yup.string(),\n  languages: yup.string()\n})\n\nexport { formSchema, editFormSchema, defaultValues }\n","import React, { useState, useContext } from 'react'\nimport PropTypes from 'prop-types'\nimport { PhaseContext } from '../../contexts/PhaseContext'\nimport { useForm } from 'react-hook-form'\nimport * as _ from 'lodash'\n\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  IconButton,\n  DialogActions,\n  Divider,\n  CircularProgress,\n  Typography\n} from '@material-ui/core'\nimport { Edit, Cancel } from '@material-ui/icons'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { green } from '@material-ui/core/colors'\n\nimport api from '../../utils/api.axios'\nimport { yupResolver } from '@hookform/resolvers/yup'\nimport { editFormSchema } from '../../utils/yupSchemas/yupProposalSchema'\n\nimport Input from '../Input'\nimport MultiLineInput from '../MultiLineInput'\nimport PrimaryButton from '../PrimaryButton'\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    minWidth: 300,\n    flex: 1\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2)\n  },\n  readOnlySelect: {\n    width: 300,\n    '&.Mui-disabled option': {\n      color: 'black'\n    }\n  },\n  buttonProgress: {\n    color: green[500],\n    position: 'absolute',\n    left: '50%'\n  }\n}))\n\nconst ProposalModal = props => {\n  const classes = useStyles()\n\n  let defaultValues = (({\n    title,\n    description,\n    chooseMessage,\n    additionalNotes,\n    environment,\n    languages,\n    type\n  }) => ({\n    title,\n    description,\n    chooseMessage: chooseMessage || '',\n    additionalNotes: additionalNotes || '',\n    environment,\n    languages,\n    type\n  }))(props.proposal)\n\n  const [editMode, setEditMode] = useState(false)\n  const [savingChanges, setSavingChanges] = useState(false)\n\n  const { currentPhase } = useContext(PhaseContext)\n\n  const { register, handleSubmit, errors, control } = useForm({\n    resolver: yupResolver(editFormSchema),\n    reValidateMode: 'onChange',\n    defaultValues\n  })\n\n  const toggleEditMode = () => {\n    let edtmd = !editMode\n    setEditMode(edtmd)\n  }\n\n  const compareDiffs = data => {\n    let differences = _.reduce(\n      data,\n      function (result, value, key) {\n        // Compare data and props.proposal properties\n        if (!_.isEqual(value, props.proposal[key])) result[key] = value\n        return result\n      },\n      {}\n    )\n\n    return Object.keys(differences).length > 0 ? differences : null\n  }\n\n  const onSubmit = data => {\n    console.log('Submitting', data)\n    let differences = compareDiffs(data)\n\n    console.log('Differences', differences)\n\n    if (differences) {\n      api\n        .post(`/proposal/edit/${props.proposal._id}`, differences)\n        .then(res => {\n          console.log(res)\n          props.refresh()\n        })\n        .catch(err => {\n          console.log(err)\n        })\n        .finally(() => {\n          setSavingChanges(false)\n          toggleEditMode()\n        })\n    } else {\n      toggleEditMode()\n    }\n  }\n\n  return (\n    <Dialog\n      fullWidth\n      maxWidth=\"lg\"\n      open={props.dialogOpen}\n      onClose={() => {\n        console.log('impement dialog close')\n      }}\n      aria-labelledby=\"max-width-dialog-title\"\n      style={{ zIndex: '900 !important' }}\n      disableBackdropClick>\n      <DialogTitle id=\"max-width-dialog-title\">\n        {['draft', 'pending_edits'].includes(props.proposal.status) ? (\n          <IconButton onClick={toggleEditMode} disabled={savingChanges}>\n            <Edit />\n          </IconButton>\n        ) : null}\n\n        <IconButton\n          edge=\"end\"\n          onClick={() => {\n            props.setDialogOpen(false)\n          }}\n          disabled={savingChanges}>\n          <Cancel />\n        </IconButton>\n        <Divider />\n      </DialogTitle>\n      <DialogContent>\n        <Input\n          inputRef={register}\n          name=\"title\"\n          label=\"Title\"\n          variant=\"outlined\"\n          margin=\"none\"\n          readOnly={!editMode}\n          error={!!errors.description}\n          helperText={errors?.description?.message}\n        />\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <MultiLineInput\n            inputRef={register}\n            name=\"description\"\n            label=\"Description\"\n            readOnly={!editMode}\n            error={!!errors.description}\n            helperText={errors?.description?.message}\n          />\n\n          <MultiLineInput\n            inputRef={register}\n            label=\"Choose Me Message\"\n            placeholder=\"<No Choose Message Supplied>\"\n            name=\"chooseMessage\"\n            readOnly={!editMode}\n            error={!!errors.chooseMessage}\n            helperText={errors?.chooseMessage?.message}\n          />\n\n          <MultiLineInput\n            inputRef={register}\n            label=\"Additional Notes\"\n            placeholder=\"<No Additional Notes Supplied>\"\n            name=\"additionalNotes\"\n            readOnly={!editMode}\n            error={!!errors.additionalNotes}\n            helperText={errors?.additionalNotes?.message}\n          />\n\n          {defaultValues.type === 'studentDefined' ? (\n            <>\n              <MultiLineInput\n                inputRef={register}\n                label=\"Environment\"\n                name=\"environment\"\n                readOnly={!editMode}\n                error={!!errors.environment}\n                helperText={errors?.environment?.message}\n              />\n              <MultiLineInput\n                inputRef={register}\n                label=\"Languages\"\n                name=\"languages\"\n                readOnly={!editMode}\n                error={!!errors.languages}\n                helperText={errors?.languages?.message}\n              />\n            </>\n          ) : null}\n\n          {props.proposal?.supervisorMessage !== '' ? (\n            <>\n              <Divider />\n              <Typography variant=\"h6\">Supervisor Feedback</Typography>\n              <MultiLineInput\n                label=\"Supervisor Notes\"\n                value={props.proposal.supervisorMessage}\n                readOnly\n              />\n            </>\n          ) : null}\n\n          {editMode && (\n            <PrimaryButton disabled={savingChanges}>Save Changes</PrimaryButton>\n          )}\n        </form>\n      </DialogContent>\n      <DialogActions>\n        {editMode ? (\n          <>\n            {savingChanges && (\n              <CircularProgress size={24} className={classes.buttonProgress} />\n            )}\n          </>\n        ) : null}\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nProposalModal.defaultProps = {\n  proposal: {},\n  setDialogOpen: () => {},\n  dialogOpen: true,\n  refresh: () => {}\n}\n\nProposalModal.propTypes = {\n  proposal: PropTypes.object.isRequired,\n  dialogOpen: PropTypes.bool.isRequired,\n  setDialogOpen: PropTypes.func.isRequired,\n  refresh: PropTypes.func.isRequired\n}\n\nexport default ProposalModal\n","import React, { useState, useEffect, useContext } from 'react'\nimport { PhaseContext } from '../../contexts/PhaseContext'\nimport { Can } from '../../Auth/Can'\nimport PropTypes from 'prop-types'\nimport {\n  Container,\n  Typography,\n  Link as MuiLink,\n  TableContainer,\n  Paper,\n  Table,\n  TableHead,\n  TableBody,\n  TableRow,\n  TableCell,\n  Button\n} from '@material-ui/core'\nimport { useHistory } from 'react-router-dom'\n\nimport api from '../../utils/api.axios'\n\nimport { proposalStatusToHumanFriendlyString } from '../../utils/proposal'\n\nimport ProposalModal from './ProposalModal'\n\nconst NextActionButton = props => {\n  const { currentPhase } = useContext(PhaseContext)\n  switch (props.status) {\n    case 'draft':\n      return (\n        <Button onClick={() => props.updateStatus(props.proposalId)}>\n          Submit Proposal\n        </Button>\n      )\n    case 'pending_edits':\n      return (\n        <Button onClick={() => props.updateStatus(props.proposalId)}>\n          Submit Updated Proposal\n        </Button>\n      )\n    case 'submitted':\n      return (\n        <Can I=\"takeActionPhaseThree\" this={currentPhase}>\n          <Button onClick={() => props.downgradeStatus(props.proposalId)}>\n            Convert to Draft\n          </Button>\n        </Can>\n      )\n    default:\n      return null\n  }\n}\n\nNextActionButton.propTypes = {\n  updateStatus: PropTypes.func.isRequired,\n  downgradeStatus: PropTypes.func.isRequired,\n  proposalId: PropTypes.string.isRequired,\n  status: PropTypes.string.isRequired\n}\n\nconst ProposalsTable = props => {\n  const history = useHistory()\n  return (\n    <TableContainer component={Paper}>\n      <Table aria-label=\"simple table\">\n        <TableHead>\n          <TableRow>\n            <TableCell>Title</TableCell>\n            <TableCell>For Topic</TableCell>\n            <TableCell>Status</TableCell>\n            <TableCell align=\"right\">Actions</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {props.loading ? (\n            <TableRow key=\"loading_supervisor_proposals\">\n              <TableCell colSpan={4}>Loading Values ...</TableCell>\n            </TableRow>\n          ) : props.values.length === 0 ? (\n            <TableRow key=\"no_supervisor_proposals\">\n              <TableCell colSpan={4}>No Proposals to show</TableCell>\n            </TableRow>\n          ) : (\n            props.values.map(proposal => (\n              <TableRow key={proposal.id}>\n                <TableCell>\n                  <MuiLink\n                    onClick={() => {\n                      props.setSelectedProposal(proposal)\n                      props.setDialogOpen(true)\n                    }}>\n                    {proposal.title}\n                  </MuiLink>\n                </TableCell>\n                <TableCell>\n                  <MuiLink\n                    onClick={() =>\n                      history.push(`/topics/view/${proposal.topic.code}`)\n                    }>\n                    {proposal.topic.title}\n                  </MuiLink>\n                </TableCell>\n                <TableCell>\n                  {proposalStatusToHumanFriendlyString(proposal.status)}\n                </TableCell>\n                <TableCell align=\"right\">\n                  <NextActionButton\n                    status={proposal.status}\n                    proposalId={proposal._id}\n                    updateStatus={props.updateStatus}\n                    downgradeStatus={props.downgradeStatus}\n                  />\n                </TableCell>\n              </TableRow>\n            ))\n          )}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  )\n}\n\nProposalsTable.propTypes = {\n  values: PropTypes.array.isRequired,\n  loading: PropTypes.bool.isRequired,\n  setSelectedProposal: PropTypes.func.isRequired,\n  updateStatus: PropTypes.func.isRequired,\n  downgradeStatus: PropTypes.func.isRequired,\n  setDialogOpen: PropTypes.func.isRequired\n}\n\nconst ManageProposal = props => {\n  const [supervisorProposals, setSupervisorProposals] = useState([])\n  const [customProposals, setCustomProposals] = useState([])\n  const [selectedProposal, setSelectedProposal] = useState()\n  const [loading, setLoading] = useState(true)\n  const [dialogOpen, setDialogOpen] = useState(false)\n\n  useEffect(() => {\n    refreshProposalList()\n  }, [])\n\n  const refreshProposalList = () => {\n    api\n      .get('/proposal/me')\n      .then(res => {\n        console.log(res)\n\n        let supervisor = res.data.proposals.filter(\n          proposal => proposal.type === 'supervisorDefined'\n        )\n        let custom = res.data.proposals.filter(\n          proposal => proposal.type === 'studentDefined'\n        )\n\n        console.log(supervisor)\n        console.log(custom)\n\n        setSupervisorProposals(supervisor)\n        setCustomProposals(custom)\n      })\n      .catch(err => {\n        console.log(err)\n      })\n      .finally(() => {\n        setLoading(false)\n      })\n  }\n\n  const setDialogOpenFunc = val => {\n    if (!val) {\n      setSelectedProposal(null)\n    }\n    setDialogOpen(val)\n  }\n\n  const updateStatus = proposalId => {\n    api\n      .post(`/proposal/${proposalId}/upgrade`)\n      .then(res => {\n        console.log(res)\n        refreshProposalList()\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }\n\n  const downgradeStatus = proposalId => {\n    api\n      .post(`/proposal/${proposalId}/downgrade`)\n      .then(res => {\n        console.log(res)\n        refreshProposalList()\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }\n\n  return (\n    <>\n      {selectedProposal ? (\n        <ProposalModal\n          key={selectedProposal._id}\n          dialogOpen={dialogOpen}\n          setDialogOpen={setDialogOpenFunc}\n          proposal={selectedProposal}\n          refresh={refreshProposalList}\n        />\n      ) : null}\n      <Container maxWidth=\"lg\">\n        <Typography variant=\"h4\" align=\"center\">\n          Proposal Management\n        </Typography>\n        <Typography>Supervisor Topic Proposals</Typography>\n        <ProposalsTable\n          loading={loading}\n          values={supervisorProposals}\n          updateStatus={updateStatus}\n          downgradeStatus={downgradeStatus}\n          setSelectedProposal={setSelectedProposal}\n          setDialogOpen={setDialogOpen}\n        />\n\n        <Typography>Custom Proposals</Typography>\n        <ProposalsTable\n          loading={loading}\n          values={customProposals}\n          updateStatus={updateStatus}\n          downgradeStatus={downgradeStatus}\n          setSelectedProposal={setSelectedProposal}\n          setDialogOpen={setDialogOpen}\n        />\n      </Container>\n    </>\n  )\n}\n\nexport default ManageProposal\n","import React, { useState, useEffect } from 'react'\nimport { useParams, Link } from 'react-router-dom'\nimport { Can } from '../Auth/Can'\n\nimport { Container, Typography, Box } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport PrimaryButton from './PrimaryButton'\nimport BackButton from './Buttons/BackButton'\n\nimport api from '../utils/api.axios'\n\nconst useStyles = makeStyles(theme => ({\n  class1: {\n    marginLeft: theme.spacing(4)\n  }\n}))\n\nconst ViewTopic = props => {\n  let { code } = useParams()\n\n  const classes = useStyles()\n\n  const [loading, setLoading] = useState(true)\n  const [topic, setTopic] = useState(null)\n  const [invalidCode, setInvalidCode] = useState(false)\n\n  useEffect(() => {\n    api\n      .get(`/topic/${code}`)\n      .then(res => {\n        if (res.data.topic) {\n          console.log(res)\n          setTopic(res.data.topic)\n        } else {\n          setInvalidCode(true)\n        }\n      })\n      .catch(err => {\n        console.log(err)\n      })\n      .finally(() => {\n        setLoading(false)\n      })\n  }, [])\n\n  if (loading) {\n    return <h1>loading ...</h1>\n  }\n\n  if (invalidCode) {\n    return <h1>Invalid Topic Code</h1>\n  }\n\n  return (\n    <Container maxWidth=\"md\">\n      <BackButton dense />\n\n      <Typography variant=\"h4\">{topic.title}</Typography>\n      <Typography variant=\"subtitle\" className={classes.class1}>\n        Supervisor: {topic.supervisor.displayName}\n      </Typography>\n\n      <br />\n\n      <Typography variant=\"overline\">Description</Typography>\n      <Typography variant=\"body1\" className={classes.class1}>\n        {topic.description}\n      </Typography>\n\n      {topic.additionalNotes === '' ? null : (\n        <>\n          <Typography variant=\"overline\">Additional Notes</Typography>\n          <Typography variant=\"body1\" className={classes.class1}>\n            {topic.additionalNotes}\n          </Typography>\n        </>\n      )}\n\n      <div>\n        {topic.tags.map(tag => (\n          <Box\n            key={tag}\n            style={{\n              display: 'inline-block',\n              backgroundColor: '#dbdbdb',\n              color: '#5b5b5b',\n              margin: '0 3px',\n              padding: '4px',\n              borderRadius: '3px'\n            }}>\n            {tag}\n          </Box>\n        ))}\n      </div>\n\n      <Can I=\"create\" a=\"Proposal\">\n        {topic?.hasProposal ? (\n          <Typography style={{ fontSize: '25px' }} align=\"center\">\n            <Link to=\"/proposals\">\n              You already created a Proposal for this topic\n            </Link>\n          </Typography>\n        ) : (\n          <Link to={`/proposals/add/${topic.code}`}>\n            <PrimaryButton>\n              Look interesting? Draft Proposal for this Topic\n            </PrimaryButton>\n          </Link>\n        )}\n      </Can>\n    </Container>\n  )\n}\nexport default ViewTopic\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { useData } from '../../contexts/CreateProposalContext'\n\nconst Breadcrumb = props => {\n  const { contextData } = useData()\n  return (\n    <div>\n      <Link to=\"/proposals/add/\">Step 1</Link>\n      {contextData?.isCustomProposal ? (\n        <>\n          ->\n          <Link to=\"/proposals/add/step2\" disabled={contextData?.step < 2}>\n            Step 2\n          </Link>\n        </>\n      ) : (\n        <></>\n      )}{' '}\n      ->\n      <Link to=\"/proposals/add/finish\" disabled={contextData?.step < 3}>\n        Finish\n      </Link>\n    </div>\n  )\n}\n\nexport default Breadcrumb\n","import React, { useEffect, useState } from 'react'\nimport PropTypes from 'prop-types'\nimport { useForm } from 'react-hook-form'\nimport { yupResolver } from '@hookform/resolvers/yup'\n\nimport * as yup from 'yup'\n\nimport api from '../../utils/api.axios'\n\nimport { useData } from '../../contexts/CreateProposalContext'\nimport { useHistory, useParams } from 'react-router-dom'\n\nimport { Typography, Container } from '@material-ui/core'\n\nimport Input from '../Input'\n\nimport PrimaryButton from '../PrimaryButton'\nimport Breadcrumb from './Breadcrumb'\nimport MultiLineInput from '../MultiLineInput'\n\nconst formSchema = yup.object().shape({\n  title: yup.string().required('Proposal must have a title'),\n  description: yup.string().required('Proposl must have a description'),\n  additionalNotes: yup.string(),\n  chooseMeMessage: yup.string()\n})\n\nconst CreateProposal = props => {\n  const [loading, setLoading] = useState(true)\n  const [validTopic, setValidTopic] = useState(false)\n\n  // CreateProposal Context\n  const { setContextData, contextData } = useData()\n  const { topicCode } = useParams()\n\n  const defaultValues = {\n    title: contextData?.title || '',\n    description: contextData?.description || '',\n    additionalNotes: contextData?.additionalNotes || '',\n    chooseMeMessage: contextData?.chooseMeMessage || ''\n  }\n\n  const { register, handleSubmit, errors } = useForm({\n    resolver: yupResolver(formSchema),\n    revalidate: 'onChange',\n    defaultValues\n  })\n\n  const history = useHistory()\n\n  useEffect(() => {\n    if (topicCode && contextData.topic === null) {\n      console.log('Loading from topicCode')\n      api\n        .get('/topic/' + topicCode)\n        .then(res => {\n          console.log(res)\n\n          if (res.data.topic) {\n            setContextData({\n              isCustomProposal: res.data.topic.type === 'studentTopic',\n              topic: res.data.topic,\n              step: 1\n            })\n\n            setValidTopic(true)\n          }\n        })\n        .catch(err => {\n          console.log(err)\n        })\n        .finally(() => {\n          setLoading(false)\n        })\n    } else {\n      setLoading(false)\n    }\n  }, [])\n\n  const onSubmit = data => {\n    console.log(data)\n\n    let formData = {\n      ...contextData,\n      title: data.title,\n      description: data.description,\n      additionalNotes: data.additionalNotes,\n      chooseMeMessage: data.chooseMeMessage\n    }\n\n    if (contextData?.step === 1) {\n      formData.step = 2\n    }\n\n    setContextData(formData)\n\n    if (contextData?.isCustomProposal) {\n      return history.push('./step2')\n    }\n    history.push('./finish')\n  }\n\n  if (loading) {\n    return <h1>Loading...</h1>\n  }\n\n  if (!validTopic) {\n    return <h1>Cannot create proposal without a selected topic</h1>\n  }\n\n  return (\n    <Container component=\"main\" maxWidth=\"md\">\n      <Breadcrumb />\n      <Typography>Create Proposal - Step 1</Typography>\n\n      <form autoComplete=\"off\" onSubmit={handleSubmit(onSubmit)}>\n        <Input\n          inputRef={register}\n          name=\"title\"\n          label=\"Project Title\"\n          error={!!errors.title}\n          helperText={errors?.title?.message}\n        />\n        <MultiLineInput\n          inputRef={register}\n          name=\"description\"\n          label=\"Project Description\"\n          error={!!errors.description}\n          helperText={errors?.description?.message}\n        />\n\n        <MultiLineInput\n          inputRef={register}\n          name=\"chooseMeMessage\"\n          label=\"Why choose me for this topic? (Optional)\"\n          placeholder=\"Why should the topic supervisor choose your project for this topic?\"\n          error={!!errors.chooseMeMessage}\n          helperText={errors?.chooseMeMessage?.message}\n        />\n\n        <MultiLineInput\n          inputRef={register}\n          name=\"additionalNotes\"\n          label=\"Additional Notes (Optional)\"\n          error={!!errors.additionalNotes}\n          helperText={errors?.additionalNotes?.message}\n        />\n\n        <PrimaryButton>Save and Continue</PrimaryButton>\n      </form>\n    </Container>\n  )\n}\n\nCreateProposal.propTypes = {\n  selectedTopic: PropTypes.string\n}\n\nexport default CreateProposal\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { useForm } from 'react-hook-form'\nimport { yupResolver } from '@hookform/resolvers/yup'\n\nimport * as yup from 'yup'\n\nimport { useData } from '../../contexts/CreateProposalContext'\nimport { useHistory } from 'react-router-dom'\n\nimport { Typography, Container } from '@material-ui/core'\n\nimport MultiLineInput from '../MultiLineInput'\nimport PrimaryButton from '../PrimaryButton'\nimport Breadcrumb from './Breadcrumb'\n\nconst formSchema = yup.object().shape({\n  environment: yup.string().required(),\n  languages: yup.string().required()\n})\n\nconst defaultValues = {\n  environment: '',\n  languages: ''\n}\n\nconst CreateProposal = props => {\n  // CreateProposal Context\n  const { setContextData, contextData } = useData()\n  const { register, handleSubmit, errors } = useForm({\n    resolver: yupResolver(formSchema),\n    reValidateMode: 'onChange',\n    defaultValues\n  })\n\n  const history = useHistory()\n\n  const onSubmit = data => {\n    // Get data from form and store in context\n\n    let formData = {\n      ...contextData,\n      environment: data.environment,\n      languages: data.languages\n    }\n\n    if (contextData?.step === 2) {\n      formData.step = 3\n    }\n\n    history.push('./finish')\n    setContextData(formData)\n  }\n\n  return (\n    <Container component=\"main\" maxWidth=\"md\">\n      <Breadcrumb />\n      <Typography>Create Proposal - Step 2</Typography>\n\n      <form autoComplete=\"off\" onSubmit={handleSubmit(onSubmit)}>\n        <MultiLineInput\n          inputRef={register}\n          name=\"environment\"\n          label=\"Environment Required\"\n          error={!!errors.environment}\n          helperText={errors?.environment?.message}\n        />\n        <MultiLineInput\n          inputRef={register}\n          name=\"languages\"\n          label=\"Languages / Technologies Required\"\n          error={!!errors.languages}\n          helperText={errors?.languages?.message}\n        />\n\n        {/* TODO: Save as Draft or save and Submit to supervisor */}\n\n        <PrimaryButton>Save and Continue</PrimaryButton>\n      </form>\n    </Container>\n  )\n}\n\nCreateProposal.propTypes = {\n  selectedTopic: PropTypes.string\n}\n\nexport default CreateProposal\n","import React, { useContext } from 'react'\nimport PropTypes from 'prop-types'\n\nimport { PhaseContext } from '../../contexts/PhaseContext'\nimport { useData } from '../../contexts/CreateProposalContext'\nimport { useHistory } from 'react-router-dom'\n\nimport { withStyles } from '@material-ui/core/styles'\nimport { Typography, Container, Tooltip } from '@material-ui/core'\n\nimport HelpIcon from '@material-ui/icons/Help'\n\nimport api from '../../utils/api.axios'\n\nimport PrimaryButton from '../PrimaryButton'\nimport Breadcrumb from './Breadcrumb'\n\nconst CreateProposal = props => {\n  // CreateProposal Context\n  const { setContextData, contextData } = useData()\n  const { currentPhase } = useContext(PhaseContext)\n\n  const history = useHistory()\n\n  const handleNextStep = submitProposal => {\n    // Get data from form and store in context\n\n    let formData = {\n      isCustomProposal: contextData.isCustomProposal,\n      title: contextData.title,\n      description: contextData.description,\n      additionalNotes: contextData.additionalNotes,\n      chooseMessage: contextData.chooseMeMessage,\n      topic: contextData.topic._id,\n      saveAsDraft: !submitProposal\n    }\n\n    if (contextData.isCustomProposal) {\n      let prevData = { ...formData }\n      formData = {\n        ...prevData,\n        environment: contextData.environment,\n        languages: contextData.languages\n      }\n    }\n\n    console.log('Submitting ', formData)\n\n    api\n      .post('/proposal/add', formData)\n      .then(res => {\n        console.log(res)\n        setContextData({})\n        history.push('/proposals')\n      })\n      .catch(error => {\n        if (error.response) {\n          switch (error.response.data) {\n            case 'existing_topic_proposal':\n              alert('Cannot create multiple proposals for a single topic')\n              break\n            default:\n              break\n          }\n        } else if (error.request) {\n          // The request was made but no response was received\n          console.log(error.request)\n        } else {\n          // Something happened in setting up the request that triggered an Error\n          console.log('Error', error.message)\n        }\n      })\n  }\n\n  return (\n    <Container component=\"main\" maxWidth=\"md\">\n      <Breadcrumb />\n      <Typography>Create Proposal - Finish (Review)</Typography>\n      <code>{JSON.stringify(contextData)}</code>\n\n      <Typography>\n        {contextData.isCustomProposal\n          ? 'Custom Proposal'\n          : 'Supervisor Defined Proposal'}\n      </Typography>\n\n      {contextData.isCustomProposal ? null : (\n        <>\n          <Typography>{contextData.topic.title}</Typography>\n          <Typography>{contextData.topic.supervisor?.displayName}</Typography>\n        </>\n      )}\n\n      <Typography>{contextData.title}</Typography>\n      <Typography>{contextData.description}</Typography>\n      <Typography>{contextData.additionalNotes}</Typography>\n\n      {contextData.isCustomProposal ? (\n        <>\n          <Typography>{contextData.environment}</Typography>\n          <Typography>{contextData.languages}</Typography>\n        </>\n      ) : null}\n\n      {currentPhase.phase === 4 ? (\n        <>\n          <PrimaryButton\n            onClick={() => handleNextStep(true)}\n            endIcon={\n              <Tooltip title=\"Not editable after submission\">\n                <HelpIcon />\n              </Tooltip>\n            }>\n            Submit Proposal\n          </PrimaryButton>\n          <PrimaryButton\n            onClick={() => handleNextStep(false)}\n            endIcon={\n              <Tooltip title=\"Editable until submitted\">\n                <HelpIcon />\n              </Tooltip>\n            }>\n            Save Proposal as Draft\n          </PrimaryButton>\n        </>\n      ) : (\n        <PrimaryButton\n          onClick={() => handleNextStep(true)}\n          endIcon={\n            <Tooltip title=\"Not editable after submission\">\n              <HelpIcon />\n            </Tooltip>\n          }>\n          Submit Proposal\n        </PrimaryButton>\n      )}\n    </Container>\n  )\n}\n\nCreateProposal.propTypes = {\n  selectedTopic: PropTypes.string\n}\n\nexport default CreateProposal\n","import React from 'react'\n\nimport * as yup from 'yup'\nimport { useForm, Controller } from 'react-hook-form'\nimport { yupResolver } from '@hookform/resolvers/yup'\n\nimport {\n  Container,\n  Typography,\n  Button,\n  FormControl,\n  Select,\n  MenuItem\n} from '@material-ui/core'\n\nimport Input from './Input'\n\nconst formSchema = yup.object({\n  email: yup.string().email().required(),\n  accountType: yup.string().required()\n})\n\nconst NoRole = props => {\n  const defaultValues = {\n    email: 'studentEmail',\n    type: 'student'\n  }\n\n  /*const { register, handleSubmit, errors, control } = useForm({\n    resolver: yupResolver(formSchema),\n    reValidateMode: 'onChange',\n    defaultValues\n  })\n\n  const onSubmit = data => {\n    console.log(data)\n  }*/\n\n  return (\n    <Container maxWidth=\"lg\">\n      <Typography align=\"center\" style={{ marginTop: '25px' }}>\n        You have not been allowed access to this system.\n      </Typography>\n\n      {/* TODO: Add request access form */}\n\n      {/* <Typography align=\"center\">\n        If you want to request access to the system, please fill out the form\n        below.\n      </Typography>\n\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <Input\n          ref={register}\n          name=\"email\"\n          label=\"Email\"\n          variant=\"outlined\"\n          margin=\"none\"\n          error={!!errors.email}\n          helperText={errors?.email?.message}\n        />\n        <FormControl variant=\"outlined\">\n          <Controller\n            render={({ onChange, value }) => (\n              <Select value={value} onChange={onChange}>\n                <MenuItem value=\"student\">Student</MenuItem>\n                <MenuItem value=\"supervisor\">Supervisor</MenuItem>\n              </Select>\n            )}\n            name=\"status\"\n            control={control}\n            error={!!errors.status}\n            helperText={errors?.status?.message}\n          />\n        </FormControl>\n      </form>\n\n      <Button type=\"submit\">Request Access</Button> */}\n    </Container>\n  )\n}\n\nexport default NoRole\n","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nimport { Container, Typography } from '@material-ui/core'\n\nconst NotFound = () => (\n  <Container maxWidth=\"md\">\n    <Typography align=\"center\" variant=\"h3\">\n      The requested page could not be found\n    </Typography>\n    <Typography align=\"center\" variant=\"h1\">\n      {':('}\n    </Typography>\n\n    <Link to=\"/\" button>\n      Back to Homepage\n    </Link>\n  </Container>\n)\n\nexport default NotFound\n","import React, { useState, useEffect } from 'react'\nimport { Link, useParams } from 'react-router-dom'\nimport PropTypes from 'prop-types'\n\nimport {\n  Container,\n  TableContainer,\n  TableHead,\n  TableBody,\n  Table,\n  TableCell,\n  TableRow,\n  Paper,\n  Typography\n} from '@material-ui/core'\n\nimport api from '../../utils/api.axios'\nimport { proposalStatusToHumanFriendlyString } from '../../utils/proposal'\n\nimport BackButton from '../Buttons/BackButton'\n\nconst TopicProposals = props => {\n  const [loading, setLoading] = useState(false)\n  const [proposals, setProposals] = useState([])\n\n  let { topicId } = useParams()\n  // Get all proposals for the current topic\n  useEffect(() => {\n    api\n      .get(`/topic/proposals/${topicId}`)\n      .then(res => {\n        console.log(res)\n\n        setProposals(res.data.proposals)\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }, [])\n\n  return (\n    <Container maxWidth=\"lg\">\n      <BackButton />\n      <Typography>Student Proposals</Typography>\n\n      <TableContainer component={Paper}>\n        <Table aria-label=\"simple table\">\n          <TableHead>\n            <TableRow>\n              <TableCell>Title</TableCell>\n              <TableCell align=\"center\">Student</TableCell>\n              <TableCell align=\"right\">Status</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {loading ? (\n              <TableRow key=\"loading_supervisor_proposals\">\n                <TableCell colSpan={3} align=\"center\">\n                  Loading Values ...\n                </TableCell>\n              </TableRow>\n            ) : proposals.length === 0 ? (\n              <TableRow key=\"no_supervisor_proposals\">\n                <TableCell colSpan={3} align=\"center\">\n                  You have no proposals to review\n                </TableCell>\n              </TableRow>\n            ) : (\n              proposals.map(proposal => (\n                <TableRow key={proposal.id}>\n                  <TableCell>\n                    <Link to={`/proposal/view/${proposal._id}`}>\n                      {proposal.title}\n                    </Link>\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    {proposal.student.displayName}\n                  </TableCell>\n                  <TableCell align=\"right\">\n                    {proposalStatusToHumanFriendlyString(proposal.status)}\n                  </TableCell>\n                </TableRow>\n              ))\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </Container>\n  )\n}\n\nTopicProposals.defaultProps = {\n  topic: {},\n  dialogOpen: false,\n  setDialogOpen: () => {},\n  refresh: () => {}\n}\n\nTopicProposals.propTypes = {\n  topic: PropTypes.object.isRequired,\n  dialogOpen: PropTypes.bool.isRequired,\n  setDialogOpen: PropTypes.func.isRequired,\n  refresh: PropTypes.func.isRequired\n}\n\nexport default TopicProposals\n","class Proposal {\n  constructor(attrs) {\n    Object.assign(this, attrs)\n  }\n}\n\nexport default Proposal\n","import React, { useEffect, useState } from 'react'\nimport { useParams, useHistory } from 'react-router-dom'\n\nimport {\n  Container,\n  Typography,\n  FormControl,\n  Divider,\n  Select,\n  MenuItem,\n  Grid,\n  FormHelperText,\n  Paper\n} from '@material-ui/core'\nimport Input from '../Input'\nimport MultiLineInput from '../MultiLineInput'\nimport PrimaryButton from '../PrimaryButton'\nimport { Can } from '../../Auth/Can'\nimport Proposal from '../../Auth/Proposal'\n\nimport * as yup from 'yup'\nimport { useForm, Controller } from 'react-hook-form'\nimport { yupResolver } from '@hookform/resolvers/yup'\n\nimport BackButton from '../Buttons/BackButton'\n\nimport api from '../../utils/api.axios'\n\nconst formSchema = yup.object({\n  responseType: yup\n    .string()\n    .oneOf(\n      ['pending_edits', 'accept', 'reject'],\n      'Please select a response type'\n    ),\n  message: yup.string().when('responseType', {\n    is: 'pending_edits',\n    then: yup.string().required('Must include a message when requesting edits')\n  })\n})\n\nconst defaultValues = {\n  responseType: 'unselected',\n  message: ''\n}\n\nconst ViewProposal = props => {\n  const [proposal, setProposal] = useState()\n  const [loading, setLoading] = useState(true)\n  const [submittingResponse, setSubmittingResponse] = useState(false)\n\n  const { register, handleSubmit, errors, control } = useForm({\n    resolver: yupResolver(formSchema),\n    reValidateMode: 'onChange',\n    defaultValues\n  })\n\n  const { id } = useParams()\n\n  useEffect(() => {\n    refreshProposal()\n  }, [])\n\n  const refreshProposal = () => {\n    api\n      .get(`/proposal/${id}`)\n      .then(res => {\n        console.log(res)\n\n        setProposal(res.data.proposal)\n      })\n      .catch(err => {\n        console.log(err)\n      })\n      .finally(() => {\n        setLoading(false)\n      })\n  }\n\n  const onSubmit = data => {\n    setSubmittingResponse(true)\n    api\n      .post(`/proposal/respond/${proposal._id}`, data)\n      .then(res => {\n        console.log(res)\n        refreshProposal()\n      })\n      .catch(err => {\n        console.log(err)\n      })\n      .finally(() => {\n        setSubmittingResponse(false)\n      })\n  }\n\n  if (loading) {\n    return <h1>Loading</h1>\n  }\n\n  return (\n    <Container maxWidth=\"lg\">\n      <BackButton />\n      <Typography>Proposal Details</Typography>\n      <Input value={proposal.title} label=\"Title\" variant=\"outlined\" readOnly />\n      <MultiLineInput\n        label=\"Description\"\n        value={proposal.description}\n        readOnly\n      />\n\n      <MultiLineInput\n        label=\"Choose Me Message\"\n        value={proposal.chooseMessage}\n        readOnly\n      />\n\n      <MultiLineInput\n        label=\"Additional Notes\"\n        value={proposal.additionalNotes}\n        readOnly\n      />\n\n      {proposal.type === 'studentDefined' ? (\n        <>\n          <MultiLineInput\n            label=\"Environment\"\n            value={proposal.environment}\n            readOnly\n          />\n          <MultiLineInput\n            label=\"Languages\"\n            value={proposal.languages}\n            readOnly\n          />\n        </>\n      ) : null}\n\n      {proposal.status === 'submitted' && (\n        <Can I=\"respond\" this={new Proposal(proposal)}>\n          <form onSubmit={handleSubmit(onSubmit)}>\n            <Paper elevation={2} style={{ padding: '20px', marginTop: '10px' }}>\n              <Typography align=\"center\" component=\"h1\" variant=\"h5\">\n                Proposal Response\n              </Typography>\n              <Grid container>\n                <Grid item xs={2}>\n                  <FormControl\n                    variant=\"outlined\"\n                    style={{ width: '100%' }}\n                    error={!!errors.responseType}>\n                    <Controller\n                      render={({ onChange, value }) => (\n                        <Select\n                          value={value}\n                          onChange={e => onChange(e.target.value)}\n                          style={{ marginTop: '16px' }}>\n                          <MenuItem value=\"unselected\" selected disabled>\n                            Choose One\n                          </MenuItem>\n                          <MenuItem\n                            value=\"pending_edits\"\n                            style={{ color: 'orange' }}>\n                            Request Edits\n                          </MenuItem>\n                          <MenuItem value=\"accepted\" style={{ color: 'green' }}>\n                            Accept\n                          </MenuItem>\n                          <MenuItem value=\"rejected\" style={{ color: 'red' }}>\n                            Reject\n                          </MenuItem>\n                        </Select>\n                      )}\n                      name=\"responseType\"\n                      control={control}\n                    />\n                  </FormControl>\n                  <FormHelperText error={!!errors.responseType}>\n                    {errors?.responseType?.message}\n                  </FormHelperText>\n                </Grid>\n                <Grid item xs={8}>\n                  <Input\n                    inputRef={register}\n                    name=\"message\"\n                    placeholder=\"Message to Student\"\n                    error={!!errors.message}\n                    helperText={errors?.message?.message}\n                  />\n                </Grid>\n                <Grid item xs={2}>\n                  <PrimaryButton\n                    style={{ height: '56px', marginTop: '16px' }}\n                    disabled={submittingResponse}>\n                    Submit\n                  </PrimaryButton>\n                </Grid>\n              </Grid>\n            </Paper>\n          </form>\n        </Can>\n      )}\n    </Container>\n  )\n}\n\nexport default ViewProposal\n","import React, { useState, useEffect } from 'react'\nimport * as yup from 'yup'\n\nimport {\n  Container,\n  Paper,\n  Typography,\n  Switch,\n  Grid,\n  Tooltip,\n  TextField\n} from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport { useForm, Controller } from 'react-hook-form'\nimport { yupResolver } from '@hookform/resolvers/yup'\nimport api from '../../utils/api.axios'\n\nimport PrimaryButton from '../PrimaryButton'\n\nconst useStyles = makeStyles(theme => ({\n  grid: {\n    marginTop: theme.spacing(2)\n  },\n  gridItem: {\n    padding: theme.spacing(1)\n  },\n  gridItemLabel: {\n    textAlign: 'right',\n    lineHeight: theme.spacing(0.25)\n  },\n  gridItemContent: {}\n}))\n\nconst formSchema = yup.object({\n  superviseStudentTopics: yup.boolean(),\n  abbr: yup.string().required()\n})\n\nconst defaultValues = {\n  superviseStudentTopics: false,\n  abbr: ''\n}\n\nexport default function Test(props) {\n  const classes = useStyles()\n\n  const [loading, setLoading] = useState(true)\n  const [updating, setUpdating] = useState(false)\n  const [supervisor, setSupervisor] = useState()\n\n  const { reset, handleSubmit, control, register, errors } = useForm({\n    resolver: yupResolver(formSchema),\n    reValidateMode: 'onChange',\n    defaultValues\n  })\n\n  useEffect(() => {\n    api\n      .get('/supervisor/me')\n      .then(res => {\n        console.log(res)\n        setSupervisor(res.data.supervisor)\n      })\n      .catch(err => console.log(err))\n      .finally(() => {\n        setLoading(false)\n      })\n  }, [])\n\n  useEffect(() => {\n    if (supervisor) {\n      reset({\n        superviseStudentTopics: supervisor.superviseStudentTopics,\n        abbr: supervisor.abbr\n      })\n    }\n  }, [supervisor])\n\n  function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms))\n  }\n\n  const onSubmit = async data => {\n    console.log(data)\n\n    setUpdating(true)\n\n    api\n      .post('/supervisor/me/edit', data)\n      .then(res => {\n        console.log(res)\n      })\n      .catch(err => console.log(err))\n      .finally(() => {\n        setUpdating(false)\n      })\n  }\n\n  if (loading) {\n    return <h1>Loading ...</h1>\n  }\n\n  return (\n    <Container maxWidth=\"lg\" component={Paper}>\n      <Typography>Supervisor Settings</Typography>\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <Grid container className={classes.grid}>\n          <Grid\n            item\n            xs={4}\n            className={[classes.gridItem, classes.gridItemLabel]}>\n            <Tooltip title=\"Supervise student defined proposals\">\n              <Typography>Supervise Student Proposals</Typography>\n            </Tooltip>\n          </Grid>\n          <Grid item xs={8} className={classes.gridItem}>\n            <Controller\n              name=\"superviseStudentTopics\"\n              control={control}\n              render={({ onChange, value }) => (\n                <Switch\n                  onChange={e => onChange(e.target.checked)}\n                  checked={value}\n                />\n              )}\n            />\n          </Grid>\n          <Grid\n            item\n            xs={4}\n            className={[classes.gridItem, classes.gridItemLabel]}>\n            <Typography>Supervisor Abbreviation</Typography>\n          </Grid>\n          <Grid item xs={8} className={classes.gridItem}>\n            <TextField\n              fullWidth\n              size=\"small\"\n              inputRef={register}\n              type=\"text\"\n              name=\"abbr\"\n              placeholder=\"Supervisor Abbreviation (John Ryan -> JRyn)\"\n              error={!!errors.abbr}\n              helperText={errors?.abbr?.message}\n            />\n          </Grid>\n        </Grid>\n\n        <PrimaryButton disabled={updating}>\n          {updating ? 'Updating . . .' : 'Save Changes'}\n        </PrimaryButton>\n      </form>\n    </Container>\n  )\n}\n","import React, { useState, useEffect } from 'react'\n\nimport api from '../utils/api.axios'\nimport moment from 'moment'\n\nimport {\n  Container,\n  TableContainer,\n  TableHead,\n  TableBody,\n  TableCell,\n  TableRow,\n  Paper,\n  Table\n} from '@material-ui/core'\nimport { DatePicker } from 'antd'\nimport PrimaryButton from './PrimaryButton'\nimport CollapsableAlert from './CollapsableAlert'\n\nconst PhaseManagement = props => {\n  const [loading, setLoading] = useState(true)\n  const [updating, setUpdating] = useState(false)\n  const [phases, setPhases] = useState()\n  const [alert, setAlert] = useState({\n    message: '',\n    severity: 'success'\n  })\n  const [alertOpen, setAlertOpen] = useState(false)\n\n  useEffect(() => {\n    api\n      .get('/phase/all')\n      .then(res => {\n        console.log(res)\n        let phasesData = res.data.phases.map(p => ({\n          phase: p._id,\n          date: moment(p.start_date)\n        }))\n        console.log(phasesData)\n        setPhases(phasesData)\n      })\n      .catch(err => {\n        console.log(err)\n      })\n      .finally(() => {\n        setLoading(false)\n      })\n  }, [])\n\n  const onSubmit = () => {\n    for (let i = 0; i < phases.length; i++) {\n      let p = phases[i]\n      if (i < phases.length - 1 && p.date.isAfter(phases[i + 1].date)) {\n        setAlert({\n          message: `Phase ${p.phase} start date must be before Phase ${\n            p.phase + 1\n          }'s start date`,\n          severity: 'error',\n          hidden: false\n        })\n        setAlertOpen(true)\n        return\n      }\n    }\n\n    let body = phases.map(p => ({\n      phase: p.phase,\n      date: p.date\n    }))\n\n    setUpdating(true)\n    api\n      .post('/phase/edit', { phases: body })\n      .then(res => {\n        console.log(res)\n        setAlert({\n          hidden: false,\n          message: 'Phase dates updated',\n          severity: 'success'\n        })\n      })\n      .catch(err => {\n        console.log(err)\n        setAlert({\n          message: 'Phase dates not updated',\n          severity: 'error'\n        })\n      })\n      .finally(() => {\n        setUpdating(false)\n        setAlertOpen(true)\n      })\n  }\n\n  const updatePhase = (value, phase) => {\n    console.log('Updating phase', phase, value)\n    let temp = [...phases]\n\n    temp[phase - 1].date = value\n\n    console.log(temp)\n\n    setPhases(temp)\n  }\n\n  if (loading) {\n    return <h1>Loading</h1>\n  }\n\n  return (\n    <Container maxWidth=\"lg\">\n      <h1>Phase Management</h1>\n\n      <TableContainer component={Paper}>\n        <Table aria-label=\"simple table\">\n          <TableHead>\n            <TableRow>\n              <TableCell>Phase No.</TableCell>\n              <TableCell>Phase Start Date</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {phases.length === 0 ? (\n              <TableRow>\n                <TableCell>No Phases to display</TableCell>\n              </TableRow>\n            ) : (\n              phases.map(phase => (\n                <TableRow key={phase.id}>\n                  <TableCell>{phase.phase}</TableCell>\n                  <TableCell>\n                    <DatePicker\n                      defaultValue={phase.date}\n                      onChange={val => updatePhase(val, phase.phase)}\n                      format=\"DD / MMM / YY HH:mm\"\n                      showTime={{ format: 'HH:mm' }}\n                      size=\"large\"\n                      renderExtraFooter={() =>\n                        'Phase will end 5 minutes before following phase start'\n                      }\n                    />\n                  </TableCell>\n                </TableRow>\n              ))\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n\n      <PrimaryButton onClick={onSubmit} disabled={updating}>\n        Update Phase Dates\n      </PrimaryButton>\n      <CollapsableAlert\n        open={alertOpen}\n        setOpen={setAlertOpen}\n        message={alert.message}\n        severity={alert.severity}\n      />\n    </Container>\n  )\n}\n\nexport default PhaseManagement\n","import React from 'react'\nimport { Typography as T, Container } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles(theme => ({\n  heading: {\n    fontSize: '28px'\n  },\n  paragraph: {\n    fontSize: '16px'\n  }\n}))\n\nexport default function HelpPage() {\n  const classes = useStyles()\n  return (\n    <Container maxWidth=\"lg\">\n      <T className={classes.heading}>What are Topics?</T>\n      <T className={classes.paragraph}>\n        A topic is a FYP project idea which is supplied by a Supervisor.\n      </T>\n      <T className={classes.heading}>What are Proposals?</T>\n      <T className={classes.paragraph}>\n        A proposal is a students intrepretation of a topic, proposals can be\n        both supervisor defined (The Supervisor has thought of the idea) or\n        student defined (The Student has thought of the idea). Student defined\n        proposals can only be sent to supervisors who have made themselves\n        available to supervise these types of project ideas.\n      </T>\n      <T className={classes.heading}>What are Phases?</T>\n      <T className={classes.paragraph}>\n        Phases are used to allow specific actions to be carried out during\n        different time ranges.\n      </T>\n    </Container>\n  )\n}\n","import React, { useEffect, useState, useContext } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Switch, Route } from 'react-router-dom'\r\nimport {\r\n  MsalAuthenticationTemplate,\r\n  useMsal,\r\n  useAccount\r\n} from '@azure/msal-react'\r\nimport { InteractionType } from '@azure/msal-browser'\r\n\r\nimport { loginRequest, config } from './config/msal-config'\r\n\r\nimport { AuthContext } from './contexts/AuthContext'\r\nimport { PhaseContext } from './contexts/PhaseContext'\r\nimport { AbilityContext } from './Auth/Can'\r\nimport generateAbilitiesFor from './Auth/ability'\r\nimport api, { setup as apiSetup } from './utils/api.axios'\r\nimport axiosGraphInstance, { setup as graphSetup } from './utils/graph.axios'\r\n\r\nimport { Toolbar } from '@material-ui/core'\r\n\r\nimport { CreateProposalContextProvider } from './contexts/CreateProposalContext'\r\n\r\nimport ErrorComponent from './components/Auth/ErrorComponent'\r\nimport Loading from './components/Auth/Loading'\r\nimport AppLoading from './components/AppLoading'\r\n\r\nimport TopicManagement from './components/TopicManagement'\r\nimport TopicList from './components/TopicList'\r\nimport AddTopicForm from './components/AddTopicForm'\r\nimport Welcome from './components/Welcome'\r\n\r\n// Student Imports\r\nimport StudentAssignment from './components/UserManagement/Assignment/StudentAssignment'\r\nimport StudentManagement from './components/UserManagement/StudentManagement'\r\n\r\n// Supervisor Imports\r\nimport SupervisorAssignment from './components/UserManagement/Assignment/SupervisorAssignment'\r\nimport SupervisorManagement from './components/UserManagement/SupervisorManagement'\r\n\r\n// Coordinator Imports\r\nimport CoordinatorManagement from './components/UserManagement/Coordinator/CoordinatorManagement'\r\nimport Header from './components/Header'\r\nimport ManageProposal from './components/Proposals/ManageProposal'\r\nimport ViewTopic from './components/ViewTopic'\r\n\r\nimport CreateProposal from './components/Proposals/CreateProposal'\r\nimport CreateProposalStep2 from './components/Proposals/CreateProposalStep2'\r\nimport CreateProposalFinish from './components/Proposals/CreateProposalFinish'\r\n\r\nimport NoRole from './components/NoRole'\r\nimport NotFound from './components/NotFound'\r\n\r\nimport TopicProposals from './components/TopicManagement/TopicProposals'\r\nimport ViewProposal from './components/Proposals/ViewProposal'\r\nimport Settings from './components/Settings'\r\n\r\nimport PhaseManagement from './components/PhaseManagement'\r\n\r\nimport Phase from './Auth/Phase'\r\n\r\nimport HelpPage from './components/Help/HelpPage'\r\n\r\nfunction App() {\r\n  const [appReady, setAppReady] = useState(false)\r\n  const { instance, accounts, inProgress } = useMsal()\r\n  const account = useAccount(accounts[0] || {})\r\n\r\n  const { user, setUserObject } = useContext(AuthContext)\r\n  const { setCurrentPhase } = useContext(PhaseContext)\r\n\r\n  const authRequest = {\r\n    ...loginRequest\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (account && inProgress === 'none') {\r\n      apiSetup(instance, account)\r\n      graphSetup(instance, account)\r\n      // TODO: Wait on this function to finish before allowing the user to continue to the website\r\n      // This will ensure all profile data is ready to use throughout the app\r\n      instance\r\n        .acquireTokenSilent({\r\n          ...loginRequest,\r\n          account: account\r\n        })\r\n        .then(async response => {\r\n          // User is logged in\r\n          // FIXME: This is being called twice on user login, 2 requests to ms graph\r\n          console.log('User is logged in')\r\n\r\n          axiosGraphInstance\r\n            .get(`${config.endpoints.graph}/me/appRoleAssignments`)\r\n            .then(async resp => {\r\n              let rolePriority = -1\r\n              let role = null\r\n              for (const roleData of resp.data.value) {\r\n                const roleObject = config.appRoles[roleData.appRoleId]\r\n\r\n                if (!roleObject) {\r\n                  console.log('Unknown role: ' + JSON.stringify(roleData))\r\n                  continue\r\n                }\r\n\r\n                const { priority, displayName } = roleObject\r\n                if (priority > rolePriority) {\r\n                  rolePriority = priority\r\n                  role = displayName\r\n                }\r\n              }\r\n\r\n              let phaseDoc = await api.get('/phase').catch(err => {\r\n                console.log('Could not retrieve phase')\r\n                console.log(err)\r\n              })\r\n\r\n              let phase = null\r\n\r\n              if (phaseDoc.data.phase) {\r\n                phase = new Phase({\r\n                  phase: phaseDoc.data.phase._id,\r\n                  startDate: phaseDoc.data.phase.start_date,\r\n                  endDate: phaseDoc.data.phase.end_date\r\n                })\r\n              } else {\r\n                phase = new Phase({\r\n                  phase: 0,\r\n                  startDate: null,\r\n                  endDate: null\r\n                })\r\n              }\r\n\r\n              console.log('phase', phase)\r\n\r\n              // Testing\r\n              phase = {\r\n                phase: 3,\r\n                startDate: new Date(Date.now() - 1000 * 60 * 60 * 24 * 10),\r\n                endDate: new Date(Date.now() + 1000 * 60 * 60 * 24 * 10)\r\n              }\r\n              setCurrentPhase(phase)\r\n\r\n              let userObject = {\r\n                role,\r\n                id: account.localAccountId\r\n              }\r\n\r\n              console.log(userObject)\r\n\r\n              if (userObject.role) {\r\n                setUserObject(userObject)\r\n                setAppReady(true)\r\n              } else {\r\n                // User has no assigned role\r\n                setUserObject(userObject)\r\n                setAppReady(true)\r\n              }\r\n            })\r\n            .catch(err => {\r\n              alert('Could not initialise your account, please try again')\r\n              console.log(err)\r\n            })\r\n        })\r\n    }\r\n  }, [account, inProgress, instance])\r\n\r\n  return (\r\n    <MsalAuthenticationTemplate\r\n      interactionType={InteractionType.Redirect}\r\n      authenticationRequest={authRequest}\r\n      errorComponent={ErrorComponent}\r\n      loadingComponent={Loading}>\r\n      {appReady ? (\r\n        <AbilityContext.Provider value={generateAbilitiesFor(user)}>\r\n          <Header />\r\n          <Toolbar />\r\n          <Pages user={user} />\r\n        </AbilityContext.Provider>\r\n      ) : (\r\n        <AppLoading />\r\n      )}\r\n    </MsalAuthenticationTemplate>\r\n  )\r\n}\r\n\r\nconst Pages = props => {\r\n  const ability = generateAbilitiesFor(props.user)\r\n  const { currentPhase } = useContext(PhaseContext)\r\n\r\n  const allowForPhase = phase => {\r\n    return Array.isArray(phase)\r\n      ? phase.includes(currentPhase.phase)\r\n      : phase === currentPhase.phase\r\n  }\r\n\r\n  // Implement Can functionality to only show available routes\r\n  return (\r\n    <Switch>\r\n      <Route exact path=\"/\">\r\n        {currentPhase.phase !== 0 ? (\r\n          props?.user?.role ? (\r\n            <Welcome />\r\n          ) : (\r\n            <NoRole />\r\n          )\r\n        ) : (\r\n          <h1>Switching Phase Please Wait</h1>\r\n        )}\r\n      </Route>\r\n\r\n      <Route exact path=\"/help\">\r\n        <HelpPage />\r\n      </Route>\r\n\r\n      {ability.can('read', 'Topic') && allowForPhase([3, 4]) && (\r\n        <Route exact path=\"/topics\">\r\n          <TopicList />\r\n        </Route>\r\n      )}\r\n\r\n      <Route path=\"/topics/view/:code\">\r\n        <ViewTopic />\r\n      </Route>\r\n\r\n      {ability.can('create', 'Topic') && allowForPhase(2) && (\r\n        <Route path=\"/topics/add\" component={AddTopicForm} />\r\n      )}\r\n\r\n      {ability.can('manage', 'Topic') && allowForPhase([2, 3, 4]) && (\r\n        <Route path=\"/topics/manage\" component={TopicManagement} />\r\n      )}\r\n\r\n      {ability.can('read', 'Proposal') && (\r\n        <Route path=\"/topic/:topicId\">\r\n          <TopicProposals />\r\n        </Route>\r\n      )}\r\n\r\n      {ability.can('manage', 'Proposal') && (\r\n        <Route exact path=\"/proposals\" component={ManageProposal} />\r\n      )}\r\n\r\n      {ability.can('create', 'Proposal') && (\r\n        <Route exact path=\"/proposals/add/step2\">\r\n          <CreateProposalContextProvider>\r\n            <CreateProposalStep2 />\r\n          </CreateProposalContextProvider>\r\n        </Route>\r\n      )}\r\n\r\n      {ability.can('create', 'Proposal') && (\r\n        <Route exact path=\"/proposals/add/finish\">\r\n          <CreateProposalContextProvider>\r\n            <CreateProposalFinish />\r\n          </CreateProposalContextProvider>\r\n        </Route>\r\n      )}\r\n\r\n      {ability.can('create', 'Proposal') && (\r\n        <Route path=\"/proposals/add/:topicCode?\">\r\n          <CreateProposalContextProvider>\r\n            <CreateProposal />\r\n          </CreateProposalContextProvider>\r\n        </Route>\r\n      )}\r\n\r\n      {ability.can('read', 'Proposal') && (\r\n        <Route exact path=\"/proposal/view/:id\">\r\n          <ViewProposal />\r\n        </Route>\r\n      )}\r\n\r\n      {ability.can('manage', 'Student') && (\r\n        <Route path=\"/student/assign\">\r\n          <StudentAssignment />\r\n        </Route>\r\n      )}\r\n\r\n      {ability.can('manage', 'Student') && allowForPhase(1) && (\r\n        <Route path=\"/student/manage\">\r\n          <StudentManagement />\r\n        </Route>\r\n      )}\r\n\r\n      {ability.can('manage', 'Supervisor') && allowForPhase(1) && (\r\n        <Route path=\"/supervisor/assign\">\r\n          <SupervisorAssignment />\r\n        </Route>\r\n      )}\r\n\r\n      {ability.can('manage', 'Supervisor') && allowForPhase(1) && (\r\n        <Route path=\"/supervisor/manage\">\r\n          <SupervisorManagement />\r\n        </Route>\r\n      )}\r\n\r\n      {ability.can('manage', 'Coordinator') && allowForPhase(1) && (\r\n        <Route path=\"/coordinator\">\r\n          <CoordinatorManagement />\r\n        </Route>\r\n      )}\r\n\r\n      {ability.can('manage', 'Coordinator') && (\r\n        <Route path=\"/settings\">\r\n          <Settings />\r\n        </Route>\r\n      )}\r\n\r\n      {ability.can('update', 'Phase') && (\r\n        <Route path=\"/phase/manage\">\r\n          <PhaseManagement />\r\n        </Route>\r\n      )}\r\n\r\n      <Route component={NotFound} />\r\n    </Switch>\r\n  )\r\n}\r\n\r\nPages.propTypes = {\r\n  user: PropTypes.object.isRequired\r\n}\r\n\r\nexport default App\r\n","import { unstable_createMuiStrictModeTheme as createMuiTheme } from '@material-ui/core/styles'\nimport red from '@material-ui/core/colors/red'\n\n// Create a theme instance.\nexport const theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#556cd6'\n    },\n    secondary: {\n      main: '#f55d42'\n    },\n    error: {\n      main: red.A400\n    },\n    background: {\n      default: '#fff'\n    }\n  }\n})\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { BrowserRouter as Router } from 'react-router-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nimport { PublicClientApplication } from '@azure/msal-browser'\r\nimport AuthContextProvider from './contexts/AuthContext'\r\nimport PhaseContextProvider from './contexts/PhaseContext'\r\nimport { msalConfig } from './config/msal-config'\r\n\r\nimport { ThemeProvider } from '@material-ui/core/styles'\r\nimport { MsalProvider } from '@azure/msal-react'\r\n\r\nimport { theme } from './styles/theme.js'\r\n\r\nconst msalInstance = new PublicClientApplication(msalConfig)\r\n\r\nconst AppProvider = () => (\r\n  <Router>\r\n    <ThemeProvider theme={theme}>\r\n      <MsalProvider instance={msalInstance}>\r\n        <AuthContextProvider>\r\n          <PhaseContextProvider>\r\n            <React.StrictMode>\r\n              <App />\r\n            </React.StrictMode>\r\n          </PhaseContextProvider>\r\n        </AuthContextProvider>\r\n      </MsalProvider>\r\n    </ThemeProvider>\r\n  </Router>\r\n)\r\n\r\nReactDOM.render(<AppProvider />, document.getElementById('root'))\r\n"],"sourceRoot":""}